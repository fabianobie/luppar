XVIII Congresso Brasileiro de Automática  12 a 16 Setembro 2010, Bonito-MS.

PARADIGMAS DA AMOSTRAGEM EM SISTEMAS DE CONTROLE EM REDE
A LFRANQUE A MARAL

DA

S ILVA, A NTONIO M ARCUS N. L IMA

 Departamento de Engenharia Elétrica, Centro de Engenharia Elétrica e Informática
Universidade Federal de Campina Grande, Rua Aprígio Veloso, 882, CEP 58429-970,
Bairro Universitário Campina Grande, Paraíba, Brazil, Caixa Postal 10053

Emails alfranque@ee.ufcg.edu.br, amnlima@dee.ufcg.edu.br
Abstract Sketch of samplings and controller projects using the paradigms based on events have shown promising and appear in the direction of the resolution of some critical problems in Networked Control Systems (NCSs), as for instance, the best
administration of the execution of tasks in a Central Processing Unit (CPU) and the reduction in the traffic of packages in the
network communications. The reasons of those advantages are in the reduction of the uses of CPU and of the bus of the network
communications, provoked by the sampling guided to event, that in reason of the acting conditions, pre-established in project, its
can increase or to reduce the sampling rate of the sensor, controllers and actuators dynamically. In this paper are presented the
paradigms of the sampling guided to event and in the time, their advantages, disadvantages and challenges. The main contribution
of this paper is a controller discrete time model, in this way the operation controller is a combination of the guided to event and in
the time mode.
Keywords

Networked Control System, Delay, Time-variant Delay, Sampling, Performance.

Resumo Esquemas de amostragens e projetos de controladores realizados  luz dos paradigmas baseados em eventos têm se
mostrado promissores e apontam na direção da superação de alguns problemas críticos em sistemas_de_controle em rede (NCSs Networked Control Systems), como por exemplo, o melhor gerenciamento da execução de tarefas em uma CPU (Central Processing
Unit) e a redução no tráfico de pacotes na rede comunicações. As razões óbvias dessas vantagens estão na redução das utilizações
das CPUs e do barramento da rede de comunicações, provocadas pela amostragem guiada a evento, que em razão das condições
de desempenho, pré-estabelecidas em projeto, podem aumentar ou diminuir a taxa de amostragem dos sensores, controlares e
atuadores dinamicamente. Diante deste cenário, neste artigo serão apresentados os paradigmas da amostragem guiadas a evento
e no tempo, suas vantagens, desvantagens e desafios. Assim, a contribuição principal deste artigo é um modelo de discretização
de controladores, em que o modo de operação do controlador é uma combinação dos modos guiados a evento e no tempo. Os
resultados de simulação são animadores. Um considerável melhoramento nos critérios de desempenhos do NCS foi observado.
Palavras-chave

.

trolador, baseadas em critérios de desempenho préestabelecidos na fase de projeto. Por exemplo, podese estabelecer uma condição de evento de amostragem
dos sensores, quando o sinal de saída da planta apresentar um erro de referência de x ou o período de
amostragem dos sensores ultrapassar um limite prédefinido (rzén, 1999). Com isso, garante-se a redução da taxa de amostragem e menos tráfego de pacotes é gerado para o meio de comunicação (strm and
Bernhardsson, 2002 McCann et al., 2004). Dessa maneira, menos pacotes de dados chegam aos nós controladores e atuadores, reduzindo assim, a utilização das
CPUs desses nós (Heemels et al., 2008 Henningsson
et al., 2008). Entretanto, neste caso, os coeficientes da
equação discreta do controlador têm que ser recalculados toda vez que um evento for gerado no nó controlador (Silva and Lima, 2008). Ainda assim, a utilização
da CPU diminui, uma vez que, o tempo entre ocorrências de eventos pode aumentar significativamente,
alongando ou contraindo dinamicamente o período de
amostragem do controlador (Heemels et al., 2008).

1 Introdução
Um dos maiores desafios no avanço da teoria de sistemas_de_controle em rede (NCSs - Networked Control
Systems) está em superar os problemas decorrentes
dos atrasos. Atrasos em NCSs são, em geral, variantes
no tempo e podem degradar o desempenho e provocar a instabilidade dos NCSs (Hespanha et al., 2007).
Na maioria das vezes, estes atrasos são decorrentes
da utilização e do compartilhamento de recursos físicos limitados, tais como largura de banda das redes de comunicações e reduzida velocidade das CPUs
(Central Processing Unit) dos nós componentes, a saber nós sensores, atuadores e controladores (Yépez
et al., 2002).
Uma das alternativas de amostragem e projeto
de controladores é a realizada sob a ótica do paradigma baseado em eventos (rzén, 1999 Heemels
et al., 2008). Técnicas de amostragem e projeto de
controladores baseados em eventos têm se mostrado
promissoras e apontam na direção da superação de alguns problemas críticos em NCSs, como por exemplo,
a redução da utilização das CPUs dos nós componentes e a redução no tráfego de pacotes na rede comunicação. O problema é que, embora estejam claras as
vantagens da amostragem guiada a evento, os desafios
no desenvolvimento de sua teoria são enormes e, até
então, muito poucos avanços foram obtidos (strm
and Bernhardsson, 2002 Heemels et al., 2008 Henningsson et al., 2008).
Essas vantagens são obtidas como consequência do pré-estabelecimento de condições de geração
de eventos, ou para amostrar os sensores ou o con-

Diante deste cenário, neste artigo serão apresentados os paradigmas das amostragens guiada a evento
(GE) e guiada no tempo (GT) (Trngren, 1998), suas
vantagens, desvantagens e desafios (Kopetz, 1993). A
contribuição principal deste artigo, é um modelo de
discretização de controladores, em que o modo de operação do controlador é uma combinação dos modos
GE e GT, denominado modo de operação guiado a
evento e no tempo (GET). Os resultados obtidos com o
controlador operando no modo GET são animadores,
uma vez que, o problema da degradação de desempenho provocado pelo atraso é amenizado.

550

XVIII Congresso Brasileiro de Automática  12 a 16 Setembro 2010, Bonito-MS.

amostragem dos sensores (PAS) e k como o atraso de
controle. Isto é, k é a soma de todos os tempos decorridos, desde o início da amostragem dos sensores, até
atuação na planta. Finalmente, tks , tkc e tka são, respectivamente, os instantes de amostragem dos sensores,
controladores e atuadores.

Além da introdução, este artigo contém as seguintes seções 2 - arquitetura dos NCSs - na qual, é definido o problema de NCS, as topologias básicas de
NCSs, modelagem dos atrasos e o efeito do compartilhamento de recursos físicos limitados 3 - os períodos de amostragem dos componentes são determinados analiticamente 4 - são abordados os paradigmas
do controle baseado em tempo e evento 5 - são realizadas as discretizações do controlador sob a ótica de
cada um dos paradigmas (GE, GET e GT). 6 - resultados de simulação são obtidos e apresentados para o
exemplo controle_de_posição do servo DC e finalmente
em 7 - são tecidas as considerações finais.

2.1.1 Atrasos de Controle
Da definição de k (Vide Definição 1) e para as topologias básicas de NCSs, da Fig. 1a, 1b, 1c e 1d, os
atrasos de controle são dados, respectivamente, por
k
k
k
k

2 Arquitetura dos NCSs
NCSs são sistemas_de_controle_em_tempo_real em que
alguns ou todos os nós componentes (sensor, Si , controlador, Ci , e atuador, Ai ) são conectados por meio de
uma rede de comunicação (Hespanha et al., 2007).
Os NCSs possuem quatro topologias básicas, a saber
nNCS (só Ci conectado  rede de comunicação (RC)),
S-CA (Si e Ci conectados  RC), SC-A (Ci e Ai conectados  RC) e S-C-A (Si , Ci e Ai conectados  RC)
ilustradas, respectivamente, nas Figs. Fig. 1a, 1b, 1c
e 1d. A Fig. 1a é do sistema_de_controle não conectado em rede (nNCS). Isto é, nenhum dos componentes está conectado a outro por meio da RC. O nNCS
pode ser visto como um sistema_de_controle convencional com o controlador conectado a uma RC (Yépez
et al., 2002). Nestas figuras os componentes não conectados diretamente  RC podem ser implementados
fisicamente em um mesmo nó.
Si
sk

Ci Ai
ck ak

RC
(a)

Si Ci
sk ck

Si
sk

Ci
ck

RC

RC
(b)

Ai
ak

(c)

sk + ck + ak
c
a
sk + sc
k + k + k
s
c
ca
k + k + k + ak
c
ca
a
sk + sc
k + k + k + k

(1)
(2)
(3)
(4)

Observe que, o fato da RC estar entre o nó sensor
e o nó controlador, torna possível tratar diretamente o
atraso sc
k . Neste caso, diz-se que este atraso é causal. Já o atraso ca
k ocorre após a execução do algoritmo de controle e é dito não-causal. Isto é, não pode
ser completamente compensado pelo controlador, uma
vez que, no instante de execução do algoritmo de controle, ca
k ainda não ocorreu e portanto é desconhecido.
Para minimizar este problema é comum a utilização de
algoritmos de predição para estimar ca
k , ou compensar
ca
no
(k
+
1)-ésimo
COAC
(Yépez
et
al., 2002).
k

2.1 Topologias Básicas de NCSs

Si Ci Ai
sk ck ak






2.2 Efeitos do Compartilhamento de Recursos Físicos Limitados
Quando uma RC é introduzida em um sistema_de_controle tem-se automaticamente que o barramento, ou
meio de comunicação da RC é compartilhado entre os
vários dispositivos a ela conectados. Os efeitos desse
ca
compartilhamento são os atrasos, sc
k eou k (Vide
Definição 1) que são, em geral, variantes no tempo
e podem, até mesmo, serem estocásticos. Estes atrasos são causados, em geral, pelo protocolo de acesso
ao meio físico de transmissão, por perdas de pacotes
decorrentes de erros de transmissão, colisões entre pacotes, interferências eletromagnéticas e sobrecarga do
barramento (Yépez et al., 2002).
Já os atrasos, ak , ck e sk são gerados nos nós
componentes e são decorrentes da execução de tarefas pelas CPUs desses nós. Quando mais de uma tarefa é executada em um nó, pode haver concorrência
pela utilização de algum recurso físico necessário para
a execução destas tarefas, por exemplo, disputas de
acesso  CPU ou de alguma região compartilhada da
memória. Quando isto ocorre tem-se caracterizado os
atrasos_variantes_no_tempo (Navet et al., 2005).
ca
O efeito de variar os atrasos ak , ck , sk sc
k eou k
provoca como consequência a variação de ak , ck e
k , conforme relação de precedência temporal de execução das tarefas nos nós e transmissão das mensagens
pela RC, ilustrada na Fig. 2, para a topologia S-C-A.
Na próxima seção serão definidos e provados os
teoremas que definem ck e ak para a topologia S-CA. Embora, a partir desta subseção tem-se enfatizado a
topologia S-C-A, tudo que for feito para esta topologia
pode ser diretamente adaptado para as outras. Neste

Ai
ak
RC

(d)

Fig. 1 Topologias básicas dos NCSs (a) nNCS. (b)
S-CA. (c) SC-A. (d) S-C-A.
Nas Figs. 1a, 1b, 1c e 1d tem-se que sk , ck , ak
podem ser dependentes do tempo, t. Entretanto, para
simplificar a notação a variável t foi omitido do arguca
mento de sk , ck , ak e também de sc
k , k , ck e ak ,
cujas designações são realizadas na Definição 1.
Definição 1 Considere Z+ seja o conjunto dos inteiros não negativos e k  Z+ seja o késimo ciclo de
operação do algoritmo de controle (COAC), denotase sk como o intervalo de tempo para a aquisição
das informações provenientes dos sensores sc
k como
o intervalo de tempo para a mensagem enviada pelo
nó sensor chegar ao nó controlador ck como o intervalo de tempo para execução do algoritmo de controle
embarcado no nó controlador ca
k como o intervalo de
tempo para a mensagem enviada pelo nó controlador
chegar ao nó atuador ak como o intervalo de tempo
de comutação para execução da mensagem de controle no atuador ak como o período de amostragem
dos atuadores (PAA) ck como o período de amostragem do controlador (PAC) s como o período de

551

XVIII Congresso Brasileiro de Automática  12 a 16 Setembro 2010, Bonito-MS.

ak

ak1
k1
s
sc c
k1
k1
k1

s
tk1

c
tk1

ck1

ak+1

ca
a
k1 sk
k1
k1

a
tk1

tks

sc
k

kc

tkc

substituindo (11) em (12), obtém-se

k+1

k

s
a
sc c
ca a
ca
k k k k+1 k+1 k+1 k+1 k+1

tka

ck

s
tk+1

c
tk+1

ck+1

sc
s
s
ck  s + sc
k  k1 + k  k1
sc
sc
ck  s + k  k1

a
tk+1

ck+2

s
sc
c c
ca ca
ak  s+skk1
+sc
k k1+kk1+k k1 (15)
sc
sc
ca
ca
ou ak  s + k  k1 + k  k1
(16)

3 Determinação analítica de ck e ak
A seguir será apresentada uma definição e uma prova
mais bem elaborada do teorema apresentado em (Silva
and Lima, 2008), com k  s , para a determinação do
PAC GE. Também será definido e provado um teorema
com k  s , para a determinação do PAA GE. Neste
texto, entende-se por controlador GE, o controlador
que executa o algoritmo de controle assim que a mensagem proveniente do nó sensor chega ao nó controlador. E, por atuador GE o atuador que aplica o sinal
de controle nas entradas da planta assim que a mensagem proveniente do nó controlador chega ao nó atuador. A definição dos teoremas a seguir apresentados
é para a topologia S-C-A. Para as outras topologias
os resultados se aplicam com as devidas adaptações.
Além disso, como neste artigo o nó sensor é GT, s é
constante e determinado segundo a teoria clássica de
controle (Franklin et al., 2006, p.454).

desde que em (15) sk1  sk e ck1  ck .

desde que em (5) sk1  sk .

4 Controle Baseado em Tempo e Evento
Uma topologia de NCS quando comparada  topologia
clássica do sistema_de_controle_digital (vide (Franklin
et al., 2006, p.453)) é mostrada na Fig. 3. Nesta figura
r(t) e r(t  sc
k ) são os sinais de referência a serem
rastreados pela planta no instante atual e atrasado, respectivamente er (t  sc
k ) é o erro de controle ou erro
de referência atrasado u(t)  Rnq e y(t)  Rnr são
as saídas do controlador e da planta, respectivamente
nr
y(t  sc
k )  R é saída da planta após a comunicação via RC. Os respectivos sinais amostrados, r(ks ),
sc
sc
r(ks  sc
k ), er (ks  k ), u(kck ), y(ks ) e y(ks  k )
também são mostrados na Fig. 3. As demais variáveis
da Fig. 3 são definidas na Definição 1.
Nó Controlador
sc
r(kssc
k ) er(ksk )
sc
+
k
er (tsc
r(tsc
k)
k)
sc)
y(k

s
k
r(ks)

(5)
(6)

s

3

r(t)

Prova A prova é feita por construção. Para tal, admita que a cada intervalo de tempo s , os sensores sejam lidos. Admita ainda que, o atraso de controle do
késimo COAC, k  Z+ , seja dado por
c
ca
a
k  sk + sc
k + k + k + k

(8)

(9)
(10)

substituindo (9) em (10), obtém-se
c
ca
a
k1  s  sk1  sc
k1  k1  k1  k1 (11)
c , é dado por
e como da Fig. 2, ck  tkc  tk1
a
s
sc
ck  ck1 + ca
k1 + k1 + k1 + k + k

u(t)

Nó Sensor

A
S y(t)
ak G sk
s

Clock
y(tsc
k ) RC
sc
k

y(ks)

Observe na Fig. 3 que, embora seja considerado o
sincronismo entre os nós componentes, a necessidade
de operação simultânea ocorre apenas na amostragem
dos sinais r(t) e y(t). Essa simultaneidade de amostragem dos sinais r(t) e y(t) é explicitada pelas setas
que conectam o bloco do clock s chaves que representam os conversores ADs da entrada e da saída do
NCS. A representação apresentada na Fig. 3 é válida
apenas para um NCS com os nós sensor e controlador
GT. A razão disso é que quando os nós componentes são GE, nenhum referencial de tempo global ou
sincronismo pode ser atribuído aos relógios dos nós
(Kopetz, 1993). Isso porque, um evento é algo esporádico, assíncrono, que não tem hora pré-definida para
acontecer (Henningsson et al., 2008). Diversos exemplos de sistemas guiados a eventos podem ser verificados em (Kopetz, 1993 strm, 2007).

(7)

reescrevendo (7) e (8) parao (k1)ésimoCOAC,tem-se
c
ca
a
k1  sk1 + sc
k1 + k1 + k1 + k1
k1  s  k1

C
ck

Nó Atuador
u(kck ) ak

Fig. 3 Diagrama de blocos do NCS topologia S-CA.

e que k s . Assim, sempre existirá um k 0,tal que
k  s  k  0

3

a
Prova Análoga  do Teorema 1 com ak  tka  tk1
.

Teorema 1 (PAC com k  s , k  Z+ ) Sejam s ,
a
ca
c
sc
s
sc
sc
k , k1 , k  k + k + k + k + k apresentados na
Definição 1 e ck o PAC do késimo COAC. Se k s ,
k  Z+ , então ck é dado por
ou



Teorema 2 (PAA com k  s , k  Z+ ) Sejam s ,
sc
ca
ca
s
sc
c
ca
a
sc
k , k1 , k , k1 e k  k + k + k + k + k
apresentados na Definição 1 e ak o PAA do késimo
COAC. Se k  s , k  Z+ , então ak é dado por

caso, basta fazer ca
k  0 e tem-se a topologia S-CA e,
sc
k  0, para obter a topologia SC-A. Para ambos os
casos a Fig. 2 também pode ser adaptada.

ck 
ck 

(13)
(14)

e desde que em (13) sk1  sk , (13) resulta em 14.

Fig. 2 Precedência temporal de execução das tarefas
e transferência das mensagens em um NCS.

sc
s
s
s + sc
k  k1 + k  k1
sc
s + sc
k  k1



(12)

552

XVIII Congresso Brasileiro de Automática  12 a 16 Setembro 2010, Bonito-MS.

Em vista da topologia do NCS da Fig. 3, será
realizada na próxima subseção a discretização do controlador. Como não é possível a compensação exata
do atraso ca
k durante o k-ésimo COAC (Yépez et al.,
2002), o objetivo aqui é fazer a compensação apenas
c
a
dos atrasos sk , sc
k , k e k , por isso a utilização da
topologia S-CA. Além disso, será considerado doravante que o nó sensor é GT, o nó controlador pode ser
GT, ou GE, ou GET e o nó atuador é sempre GE.
A inovação trazida por este artigo está justamente
na introdução do modo de operação GET do controlador. A operação do controlador nesse modo gera algumas implicações. Por exemplo, o PAC (vide Teorema 1) é variante no tempo (VT), desde que algum dos atrasos sk ou sc
k seja VT. A implicação dessas variabilidades é a rediscretização do controlador,
isto é, o re-cálculo dos coeficientes da equação discreta do controlador (Silva and Lima, 2008), (strm
and Wittenmark, 1997, 328). Rediscretizar o controlador é uma desvantagem, pois aumenta o tempo de
execução da CPU do nó controlador (rzén, 1999)
e pode ocorrer erros ou de natureza física ou lógica
(aritméticas de ponto_fixo eou ponto_flutuante) utilizada (Hanselmann, 1987). Outra desvantagem eou
cuidado a ser tomado está no cálculo de eAc ck , realizado no re-cálculo dos coeficientes da equação discreta do controlador, que além de aumentar o tempo
de execução da CPU, pode não convergir (Moler and
Loan, 1978). Portanto, deve-se utilizar a forma mais
conveniente, entre as 19 possíveis, de calcular eAc ck
(Moler and Loan, 2003). Aqui o cálculo de eAc ck foi
feito com a expansão em série de potência, isto é
e

Ac ck

ente do nó controlador no nó atuador. Isto é, o atuador
é eminentemente GE.
Para possibilitar o surgimento dessa técnica foi
necessário utilizar o PAC dado pelo Teorema 1. O sincronismo é necessário para possibilitar a medição dos
atrasos via técnicas de time-stamping (Johannessen,
2004), necessários para determinação do PAC, e para
amostrar y(t) e r(t) simultaneamente, de forma a evitar erros na obtenção de er (t  sc
k ). A seguir serão
apresentadas as discretizações do controlador sob a
ótica dos vários paradigmas de operação do mesmo.
5

Discretização do Controlador para k  s

Inicialmente deve-se projetar o controlador para o sistema_de_controle contínuo nNCS, segundo os requisitos de desempenho desejados. Depois, de posse das
matrizes de estado, Ac , Bc , Cc e Dc , do controlador
projetado para o sistema_de_controle contínuo nNCS,
cria-se um modelo em espaço_de_estados do controlador considerando os atrasos do NCS. Este modelo é
xc (t)  Ac xc (t) + Bc er (t  sc
k )
u(t)  Cc xc (t) + Dc er (t  sc
k )

(18)
(19)

em seguida, discretiza-se o controlador a partir do modelo em espaço_de_estados dado pelas equações (18) e
(19). A discretização será realizada para o controlador
nos modos GE, GT e GET. Para que k seja compens
c
sado pelo controlador, a sc
k será incorporado k , k e
a
sc
k , o que resulta em k  k , com k dado por (2).
5.1 Discretização do Controlador - Modo nNCS
Para a topologia nNCS, Fig. 1a, k é dado por (1) e
pode ser ou não considerado na discretização. Quando
k é muito menor que a constante de tempo do sistema,
k é feito igual a 0, isto é, k  0 (Yépez et al., 2002).

Anc nck
Ac ck A2c 2ck
 I+
+
+ +
+    (17)
1!
2!
n!

com I a matriz identidade da mesma ordem de Ac .
Além disso, como ck e s são diferentes e ck é VT,
a análise matemática da malha_fechada discreta fica
impossível de ser realizada. Todavia, a simulação é
realizada de forma a representar fielmente os paradigmas de operação do NCS. Os resultados obtidos por
simulação, discutidos na seção 6, são animadores.
Entretanto, embora haja desvantagens em rediscretizar o controlador, também existem vantagens, tais
como aumento das utilizações da CPU do nó controlador e do barramento da rede de comunicações
(rzén, 1999 Heemels et al., 2008). Contudo, a maior
vantagem é a apresentada como contribuição principal
deste artigo, que consiste na criação no modo GET de
operação do controlador com o qual se consegue reduzir os efeitos do atraso do NCS (topologia S-CA). Isso
é possível graças  variabilidade dos atrasos e consequentemente do PAC. A técnica proposta é baseada na
criação de um novo paradigma de amostragem baseado nos paradigmas da amostragem GE e GT aqui denominada GET. Para implementação da amostragem
GET no nó controlador, o relógio de todos os nós componentes devem ser sincronizados por um relógio global. Além disso, o instante de execução do algoritmo
de controle no nó controlador é determinado por um
evento, o evento de chegada de um pacote no nó controlador. O início da atualização dos sinais dos atuadores também ocorre com a chega de um pacote proveni-

5.1.1 Modo nNCS com k  0
A representação dinâmica do controlador, em espaço
de estados, para a topologia nNCS, com k  0 é
xc (t)  Ac xc (t) + Bc er (t)
u(t)  Cc xc (t) + Dc er (t)

(20)
(21)

e seu modelo equivalente discreto (MED) é, conforme
(strm and Wittenmark, 1997, p.34), dado por
xc (ks + s )  xc (ks ) + er (ks )
u(ks )  Cc xc (ks ) + Dc er (ks ),
onde

  eAc s

e



Z s
0

eAc s dsBc

(22)
(23)
(24)

5.1.2 Modo nNCS com k 6 0
Se k 6 0, é dado por (1) a representação dinâmica do
controlador, em espaço_de_estados, torna-se
xc (t)  Ac xc (t) + Bc er (t  k )
u(t)  Cc xc (t) + Dc er (t  k )

(25)
(26)

cujo MED é (strm and Wittenmark, 1997, p.39)
xc(ks+s)  xc(ks)+0 er(ks)+1 er(kss) (27)
u(ks )  Cc xc (ks ) + Dc er (ks  k ),
(28)

553

XVIII Congresso Brasileiro de Automática  12 a 16 Setembro 2010, Bonito-MS.

  eAc s ,

onde

0 

1  eAc (s k )

Z k

Z s k
0

eAc s dsBc

eAc s dsBc

0

5.3 Discretização do controlador - modo GET

(29)

Analisando o resultado da subseção 5.2 o MED do
controlador é sem atraso. Do ponto de vista de modo
de operação GE, esse resultado faz sentido. Entretanto, do ponto de vista de modo de operação GT o
modelo obtido não parece fazer sentido já que sc
k 6 0.
Uma pergunta natural que surge neste momento é,
como obter o MED do controlador integrando (18)
c
em tkc ,t, com tkc  t  tk+1
(veja Fig. 4 - terceira lic
c
nha, pontos tk1 , tk ,    ,) e considerando o modo de
operação GT do controlador? A resposta a esta pergunta exige a criação de um novo paradigma de amostragem, que consiste na junção dos paradigmas GE e
GT, aqui denominado de modo de operação guiado a
evento e no tempo (GET). Com isso, o processo de discretização permanece idêntico ao modo GT clássico
(vide (strm and Wittenmark, 1997, p.39)). Porém,
o instante de inicialização da execução do algoritmo
de controle, no nó controlador, é dado por um evento.
O evento de chegada de uma mensagem no nó controlador. A consequência dessas considerações é a mudança do intervalo de integração de (18) de tks ,t, com
s
s , t s ,    , sexta linha da
tks  t  tk+1
(veja pontos tk1
k
c
Fig. 4), para o intervalo tkc ,t, com tkc  t  tk+1
(veja
c , t c ,    , terceira linha da Fig. 4). Esta
pontos tk1
k
mudança implica em um PAC VT, desde que qualquer
sc
sk1 , sk , sc
k1 ou k varie no tempo. Este PAC, ck , é
dado pelo Teorema 1.
Para que no MED do controlador apareça o termo
relativo ao atraso, não basta apenas mudar o intervalo
s , para o
de integração de (18) de tks ,t, com tks  t  tk+1
c
c
c
intervalo tk ,t, com tk  t  tk+1 , como feito na subseção 5.2. Isso requer a criação de um modelo que case
o significado físico do atraso ao modelo_matemático
discreto equivalente do controlador com atraso. Para
possibilitar a adequação dos conceitos físicos com o
significado matemático das expressões, deduzidas na
subseção 5.2 o conceito de referencial temporal precisa ser considerado. A idéia para superar estes entraves adveio da noção de simetria geométrica de dois
pontos em relação a uma reta. Para o késimo COAC,
um desses pontos é o instante tks . O outro ponto é o
instante tkc + sc
k . Por fim, a reta vertical que define
o ponto médio entre os pontos definidos pelos instanc
tes tks e tkc + sc
k é igual a tk , como ilustrado na Fig.
5. Ou seja, as retas definidas pelos pontos tks e tkc + sc
k
são simétricas em relação  reta definida pelo ponto tkc .
Agora, se a Fig. 5 é introduzida na Fig. 4 (vide quarta
e sexta linhas da Fig. 4) terá-se-a estabelecido uma
maneira de burlar a inconsistência do conceito físico
do atraso com o significado das expressões matemáticas. Assim, a discretização do controlador é obtida a
partir de (18) e (19), resolvendo (18) no intervalo de
tempo de um PAC, ck (Teorema 1). Desta maneira,
c
deve-se pré-multiplicar (18) por eAc (ttk ) e depois de
algumas manipulações matemáticas integrar a equac 
ção resultante no intervalo tkc ,t, com tkc  t  tk+1

(30)

5.2 Discretização do controlador - modo GE
Para se obter o MED do controlador das equações (18)
e (19), operando no modo GE, deve-se pré-multiplicar
c
(18) por eAc (ttk ) e depois de algumas manipulações
matemáticas integrar a equação resultante no intervalo
c , para obter
tkc ,t, com tkc  t  tk+1
c

xc (t)  eAc (ttk ) xc (tkc ) +

Z t
tkc




eAc (ts ) Bc er (s  sc
k )ds

(31)
c
como er (t  sc
k ) é constante no intervalo tk ,t, desde
c
que tkc  kck and t  tk+1
 kck + ck , substituindo
c
tk  kck and t  kck + ck em (31), obtém-se
Z c
k

xc (kck +ck )  eAc ck xc (kck )+

0

eAc s dsBc er (kck )

(32)
Note que, no instante da execução da lei de consc
trole sc
k1 e k são conhecidos (isto é, podem ser
determinados utilizando time-stamping) e então ck é
sc
dado pelo Teorema 1. Desta maneira, sc
k1 , k e ck
assumem um valores constantes, e assim (31) resulta
em (32). Neste caso, de (32) e (19) o MED do controlador GE dado por (18) e (19) é
xc (kck + ck )  xc (kck ) + er (kck )
u(kck )  Cc xc (kck ) + Dc er (kck )
onde

y()
y(ks ksc )

er (kssc
k )
er (kssc
k )
GET
er (kssc
k )
GT
er (kssc
k )
GT

  eAc ck

y(t)

e 

Z c
k
0

eAc s dsBc

t

sc
k

sc
k1

sc
k

sc
k+1

tkc
sc
k sc
k

c
tk+1
sc
k+1 sc
k+1

c
tk1
sc
sc
k1k1

sc
k+1

tkc

c
tk1

c
tk+1
sc
k+1

sc
k

sc
k1

tkc

c
tk1

s
tk1

(35)

y(ks )

sc
k1

sc
k1

(33)
(34)

sc
k

sc
k1
tks

sc
k

c
tk+1
sc
k+1 sc
k+1
s
tk+1

t

t

t

t

s
tk+2
t

Fig. 4 Relações entre os sinais y(t), y(ks ), y(ks 
sc
sc
sc
k ), er (ks  k ) e u(kck ), com k  s .
Observe, que como era de se esperar, o MED do
controlador no modo GE é igual ao do sistema discreto sem atraso (subseção 5.1). Isso ocorre porque a
um evento não se pode associar um tempo. Sua ocorrência é esporádica (Henningsson et al., 2008), isto é,
a chegada de um pacote no controlador. A diferença
matemática desse modelo para o da subseção 5.1 está
no fato que ck aqui é VT e dado pelo Teorema 1.

c

xc (t)  eAc (ttk ) xc (tkc ) +

Z t
tkc




eAc (ts ) Bc er (s  sc
k )ds

(36)
Para calcular a integral de (36) é conveniente explicitar
o intervalo de integração em duas partes tkc ,tkc + sc
k e

554

XVIII Congresso Brasileiro de Automática  12 a 16 Setembro 2010, Bonito-MS.

sc
tkc + sc
k ,t, de maneira que er (t  k ) seja constante
em cada um dos intervalos (veja er (ks  sc
k ) GET,
quarta linha da Fig. 4). Além disso, observe que no
sc
instante da execução da lei de controle sc
k1 e k são
conhecidos (isto é, podem ser determinados através de
time-stamping) e então ck é dado pelo Teorema 1. Assc
sim, sc
k1 , k e ck , no instante da execução da lei de
controle, assumem valores constantes e portanto, após
algumas manipulações matemáticas (36) resulta em
c

eAc s dsBc er (tkc ) +
c
eAc s dsBc er (tk1
) (37)

ttkc ck

c
c
desde que, tkc  kck , t  tk+1
 kck + ck e tk1

c
c
c
kck  ck , substituindo tk , t  tk+1 e tk1 em (37)
obtém-se

xc (t)  e

Ac ck

+e

Z c sc
k
k

xc (kck ) +

e

Z sc
k

Ac (ck sc
k )

0

0

e

, 0 

Z s sc
k

0

Z sc
k

xc (t)  eAc s xc (ks ) +

dsBc

Z sc
k

+eAc (s k )

(41)

eAc s dsBc er (ks ) +

0

0

eAc s dsBc er (ks  s )

(45)

(42)

Assim, o MED do controlador GT de (18) e (19) é de
(45) e (19) dado por

Para compensar completamente k , os atrasos sk ,
e ak são adicionados a sc
k de (39)-(42).

xc(ks +s)  xc(ks)+0er(ks)+1 er(ks s) (46)
u(ks )  Cc xc (kck ) + Dc er (ks  sc
(47)
k )

sc

1  eAc (ck k )
ck

e

c
eAc s dsBc er (tk1
) (44)

ttkc ck

sc

Ac s

eAc s dsBc er (tkc ) +

0
ttkc ck +sc
k

c
agora, desde que, tkc  kck , t  tk+1
 kck + ck e
c
tk1  kck  ck , e como no modo TD sk1  sk ,
sc c
c ca
ca
sc
k1  k , k1  k , k1  k , então ck  s , consequentemente o controlador é IV. Portanto, substic
c
tuindo tkc , t  tk+1
e tk1
em (44) obtém-se

eAc s dsBc er (kck  ck ) (38)

xc(kck +ck )  xc(kck )+0er(kck )+1er(kckck) (39)
u(kck )  Cc xc (kck ) + Dc er (kck  sc
(40)
k )
onde

Z

+eAc (ck k )

dsBc er (kck ) +

Z c sc
k
k




eAc (ts ) Bc er (s  sc
k )ds

Z tt c sc
k
k

c

com o período de amostragem ck dado pelo Teorema
1. Assim, o MED do controlador GET dado por (18)
e (19) é de (38) e (19) dado, respectivamente por

Ac ck

tkc

xc (t)  eAc (ttk ) xc (tkc ) +
sc

Ac s

Z t

(43)
Para resolver a integral de (43) deve-se dividir o
intervalo de integração, tkc ,t, em duas partes, tkc ,tkc +
c
sc
sc
sc
k  e tk + k ,t, tal que, er (t  k ) seja constante em
sc
cada parte (veja er (ks  k ) TD, sexta linha da Fig.
4). Assim, depois de algumas manipulações matemáticas (43) resulta em

0
ttkc ck +sc
k

Z

sc

c

xc (t)  eAc (ttk ) xc (tkc ) +

Z tt c sc
k
k

xc (t)  eAc (ttk ) xc (tkc ) +
+eAc (ck k )

c
intervalo tkc ,t, com tkc  t  tk+1
(veja quinta linha da
c
c
Fig. 4, pontos tk1 , tk ,    ). Agora, pré-multiplicando
c
(18) por eAc (ttk ) e depois de algumas manipulações
matemáticas integrando a equação resultante no interc , obtém-se
valo tkc ,t, com tkc  t  tk+1

y(tks )

eAc s dsBc

0

y(tks  sc
k )
er (tkc )
sc
k

sc
k

...

Fig.

tks

tkc

5 Simetria das retas tks etkc+sc
k em

onde
er (tkc  sc
k )

...

tkc + sc
k

relação 

  eAc s , 0 
sc

1  eAc (s k )

Z s sc
k

Z sc
k
0

0

eAc s dsBc

eAc s dsBc

(48)
(49)

Para compensar completamente k , os atrasos sk ,
ck e ak são adicionados a sc
k das equações (46)-(49).

t

retatkc .

6 Resultados - Exemplo do servo DC

5.4 Discretização do controlador - modo GT

Um exemplo de NCS encontrado na literatura é o controle_de_posição do servo DC. As funções_de_transferências da planta e do controlador PD (Proporcional
Derivativo) que estabiliza a posição do servo DC são
dadas, respectivamente, por (Silva and Lima, 2008)

Quando o controlador é GT o algoritmo de controle
c
sempre é executado em instantes de tempo tk1
, tkc ,
   , (vide Fig. 4 - quinta linha) pré-determinados na
fase de projeto do NCS. A consequência disso é um
sistema_de_controle invariante no tempo (IT). Tanto,
c
a
os atrasos sk , sc
k , k e k , quando o PAC e o PAA
são ITs. É fácil ver, dos Teoremas 1 e 2 que o PAC
e o PAA são ITs quando os atrasos são ITs, uma vez
sc
que para atrasos ITs tem-se sk1  sk , sc
k1  k ,
c
c
ca
ca
k1  k , k1  k , o que implica dos Teoremas 1
e 2 que ck  ak  s . Assim, do ponto de vista matemático, tanto faz resolver (18) como feito tradicionalmente (strm and Wittenmark, 1997, p.39) intes
grando (18) no intervalo tks ,t com tks  t  tk+1
(veja
s
s
Fig. 4, pontos tk1 , tk ,    ) ou utilizar o método desenvolvido na subseção 5.3, onde (18) é integrada no

G(s) 

0, 035s
1000
e C(s)  1, 5(1+
) (50)
s(s + 1)
1+0, 0035s

O NCS foi simulado com s  2, 0 ms, sk  30 s,
 20 s e ak  30 s. Já sc
k foi modelado por uma
distribuição discreta de Poisson (DDP), e também por
duas sequências do tipo k  Z, k  2, k  0, 8s
para k ímpar e k  0, 1s para k par ou, k  0, 8s
para k par e k  0, 1s para k ímpar.
Uma comparação da resposta ao degrau unitário
do NCS com k VT e IT é mostrada nas Figs. 6a, 6b,
ck

555

XVIII Congresso Brasileiro de Automática  12 a 16 Setembro 2010, Bonito-MS.

ram atrasos grandes. Enquanto que, os primeiros pacotes de dados do NCSav da Fig. 6e sofreram atrasos
menores (vide Fig. 6f). Os atrasos estocásticos variam
entre 0, 1s e 0, 8s , isto é, 0, 1s  k  0, 8s . Mesmo
tendo um km > 0, 1s , o overshoot do NCSav da Fig.
6e é menor que o do nNCSm que tem k  0, 1s .

6c, 6d, 6e. Estes resultados são obtidos com o controlador operando nos modos nNCS contínuo no tempo
(nNCSC), nNCS com k  0, nNCS com k  0, 1s
(nNCSm), nNCS com k  0, 5s (nNCSi), nNCS com
k  0, 8s (nNCSM) e GT com k  0, 8s  para o
NCS com k VT (vide k na Fig. 6f), ck  s e
k  0, 8s dado segundo uma DDP (NCSav) e para o
controlador nos modos GE e GET ck é dado pelo Teorema 1 e k  0, 8s dado segundo uma DDP (vide
k na Fig. 6f). Exceto o modo nNCSC em que o
controlador é contínuo no tempo, todos os outros resultados apresentados são para o controlador discreto
no tempo. Em todos os resultados em que k é VT,
de forma determinística ou estocástica, foi utilizado a
mesma sequência de atrasos, mesmo quando ck  s
ou quando ck é dado pelo Teorema 1.

1, 2

1, 2

0, 8

0, 8

y(t)

y(t)
nNCS
nNCSm
nNCSi
nNCSM
nNCSC

0, 4

nNCSm
NCSav
GE
GET
GT
nNCSC

0, 4

0

0
0

0, 1

t(s)

0, 2

0, 3

0

0, 1

(a)

t(s)

0, 2

(b)

6.1 Análise dos Resultados
1, 2

1, 2

Na Fig. 6a é ilustrado o efeito do atraso sobre um
sistema_de_controle nNCS linear invariante no tempo
(LIT). Observe que para k  0, 04s  80 s (vide
curva nNCSm) e k  0 (curva nNCS) as respostas ao
degrau do nNCSm e nNCS são praticamente sobrepostas. Já para k  0, 5s  1 ms (vide curva nNCSi) e
k  0, 8s  1, 6 ms (vide curva nNCSM) tem-se claramente evidenciado o efeito crescente da degradação
provocada por k no nNCS, quando k é aumentado.
Além disso, na Fig. 6a, a diferença entre as curvas
nNCSm, nNCS e a nNCSC é devido ao atraso médio
de ak 2, introduzido pelo segurador de ordem zero
(strm and Wittenmark, 1997, p.320). Para sistemas
LIT tem-se ck  ak  s e assim é utilizado, como
atraso médio, s 2 em vez de ak 2. Entretanto, em
NCS deve-se utilizar ak 2, uma vez que, ak 6 s é
VT (vide Teorema 2). É claro que, o atraso médio
ak 2 está presente em todos os sistemas simulados
das Fig. 6a, 6b, 6c, 6d e 6e, exceto para o nNCSC.
Doravante k  Z, k  2, exceto as curvas nNCSC e
nNCSm das Fig. 6b e 6c, todas as outras curvas da Fig.
6b foram obtidas com k  0, 1s para k ímpar e k 
0, 8s para k par. E, as demais curvas da Fig. 6c, foram
obtidas com k  0, 8s para k ímpar e k  0, 1s , para
k par. Observe nestas figuras (vide curvas NCSav) que
quando ck  s , mas k é VT, dependo da ordem de
ocorrência de k mínimo e máximo a resposta ao degrau pode mudar completamente. Observe ainda, nas
curvas NCSav (Fig. 6b e 6c) que embora o atraso médio km  (0, 1s + 0, 8s )2  0, 45s a curva NCSav
da Fig. 6c tem maior overshoot que a curva NCSav
da Fig. 6b. Além disso, a curva NCSav da Fig. 6c
tem maior overshoot que a curva GT, simulada com
k  0, 8s , mesmo com km  0, 45s < 0, 8s . Isso
quer dizer que, para o sistema VT, as formas como
os atrasos ocorrem são mais relevantes que seus valores propriamente ditos. Isto é, bastou mudar a ordem
da sequência de atrasos de k  0, 1s para k ímpar e
k  0, 8s para k par, para k  0, 8s para k ímpar e
k  0, 1s para k par, para se verificar uma mudança
acentuada nas curvas NCSav. Em outras palavras, k
inicial grande implica em pior desempenho. Quando
k varia de forma estocástica, essa tendência também
se confirma (vide curvas NCSav Fig. 6d e 6e). Os primeiros pacotes de dados do NCSav da Fig. 6d sofre-

0, 8

0, 8

y(t)

nNCSm
NCSav
GE
GET
GT
nNCSC

0, 4

0
0

0, 1

t(s)

y(t)

nNCSm
NCSav
GE
GET
GT
nNCSC

0, 4

0

0, 2

0

0, 1

(c)

t(s)

0, 2

(d)
1, 8

1, 2

1, 2

0, 8

k(ms)

y(t)

nNCSm
NCSav
GE
GET
GT
nNCSC

0, 4

0
0

0, 1

t(s)

(e)

0, 2

0, 6

0
0

0, 1

t(s)

0, 2

(f)

Fig. 6 Resposta ao degrau unitário, com k  Z, k  2
(a) nNCS com k  0 e com diferentes k 6 0 ITs (b)
nNCSC, nNCSm e NCSs com k  0, 1s para k ímpar
e k  0, 8s para k par (c) nNCSC, nNCSm e NCSs
com k  0, 8s para k ímpar e k  0, 1s para k par
(d) nNCSC, nNCSm e NCSs com k  0, 8s dado segundo uma DDP e com ocorrências de k  0, 8s nas
amostras iniciais, isto é, k próximo de 2 (e) nNCSC,
nNCSm e NCSs com k  0, 8s dado segundo uma
DDP e sem ocorrências de k  0, 8s nas amostras
iniciais (f) k  0, 8s dado segundo uma DDP e sem
ocorrências de k  0, 8s nas amostras iniciais.
As respostas ao degrau dos NCSs com controlador operando nos modos GE e GET apresentadas nas
Fig. 6b e 6c também são afetadas pela ordem de ocorrência dos atrasos, mas seus overshoots são menores
que o overshoot do nNCSm, como ilustrado nas simulações. Quando k é estocástico nem sempre se verifica esta tendência (vide GE e GET Fig. 6d e 6e).
Todavia, em geral, seus overshoots são menores que
o overshoot do nNCSm. Isto quer dizer que, quando
o controlador está operando nos modos GE e GET os
efeitos do atraso melhoram o desempenho do NCS,
reduzindo parâmetros como overshoot, tempo de subida e tempo de estabelecimento. Além disso, vale
ressaltar que no NCS com controlador no modo GE o

556

XVIII Congresso Brasileiro de Automática  12 a 16 Setembro 2010, Bonito-MS.

atraso afeta apenas ck e ak . Isso acaba camuflando o
resultado, uma vez que, pra todos os efeitos é como se
o NCS com controlador no modo GE fosse um sistema
de controle com ck e ak variantes, mas sem atraso,
como já verificado durante a discretização do controlador no modo GE (vide subseção 5.2). Já para o NCS
com controlador no modo GET todos os atrasos são
considerados e aparecem nas equações do controlador
discreto (vide subseção 5.3). Portanto, isso quer dizer
que os efeitos dos atrasos VTs no NCS com controlador no modo GET são benéficos, como já enfatizado.
Com isso, do ponto de vista do projeto do NCS, é possível, entre outras coisas, não se preocupar com o escalonamento das mensagens na RC e com a execução
das tarefas nos nós componentes durante o projeto do
NCS. É claro que, para tal, tanto a utilização da RC e
das CPUs dos nós componentes têm que ser menores
que 1 (Kopetz, 1993). Outra vantagem é a flexibilização da utilização de RCs como a Ethernet e outras
RCs sem controle de acesso ao meio determinístico,
mas que possuem taxas de transmissões elevadas. A
desvantagem principal dessa abordagem é a de ter que
rediscretizar o controlador a cada COAC.
7

Franklin, G. F., Powell, J. D. and Emami-Naeini, A.
(2006). Feedback Control of Dynamic Systems,
fifth edn, Pearson Education, Republic of China,
ISBN 978-8-115-15853-6.
Hanselmann, H. (1987). Implementation of digital
controllersa survey, Automatica 23(1) 7  32.
Heemels, W. P. M. H., Sandee, J. H. and Van den Boschi, P. P. J. (2008). Analysis of event-driven controllers for linear systems, International Journal
of Control 81(4) 571590.
Henningsson, T., Johannesson, E. and Cervin, A.
(2008). Sporadic event-based control of firstorder linear stochastic systems, Automatica
44(11) 2890  2895.
Hespanha, J., Naghshtabrizi, P. and Xu, Y. (2007). A
survey of recent results in networked control systems, Proceedings of the IEEE 95(1) 138162.
Johannessen, S. (2004). Time synchronization in a
local area network, Control Systems Magazine,
IEEE 24(2) 61  69.

Conclusões

Kopetz, H. (1993). Should responsive systems be
event-triggered or time-triggered, IEICE TRANSACTIONS ON INFORMATION AND SYSTEMS
E76D(11) 13251332.

Neste artigo foram apresentados os paradigmas dos
modos de operações dos controladores para NCS, a
saber, modos de operação guiado no tempo (GT) e
guiado a evento (GE). Como contribuição principal
tem-se a criação de um novo paradigma de discretização do controlador baseado nos paradigmas GT e
GE aqui denominado de modo de operação guiado
a evento e no tempo (GET). Os resultados obtidos,
em simulação, com a abordagem GET desenvolvida
são relevantes para o desenvolvimento teórico da área
de NCSs, uma vez que, resolvem eou esclarecem os
problemas causados pelos atrasos_variantes_no_tempo,
reduzindo os valores de parâmetros de desempenho
como overshoot, tempo de subida e tempo de estabelecimento.
Como trabalhos futuros deseja-se compensar ca
k .
8

McCann, R., Gunda, A. K. and Damugatla, S. D.
(2004). Improved operation of networked control systems using Lebesgue sampling, Conf.
Rec. IAS, Vol. 2, pp. 12111216.
Moler, C. and Loan, C. V. (1978). Nineteen dubious ways to compute the exponential of a matrix,
SIAM Review 20(4) 801836.
Moler, C. and Loan, C. V. (2003). Nineteen dubious ways to compute the exponential of a matrix,
twenty-five years later, SIAM Review 45(1) 3
49.
Navet, N., Song, Y., Simonot-Lion, F. and Wilwert,
C. (2005). Trends in automotive communication
systems, Proceedings of the IEEE 93(6) 1204 
1223.

Agradecimentos

Ao PPGEE e ao CNPqCAPES pelo apoio financeiro.
Referências

Silva, A. A. and Lima, A. M. N. (2008). Projeto de um
sistema_de_controle em rede, XVII CBA pp. 16.

rzén, K.-E. (1999). A simple event-based pid controller, In Proceedings of the 14th IFAC World
Congress, Beijing, P.R. China.

Trngren, M. (1998). Fundamentals of implementing
real-time control applications in distributed computer systems, J. of Real-Time Systems 14 219
250.

strm, K. and Bernhardsson, B. (2002). Comparison
of Riemann and Lebesgue sampling for first order stochastic systems, Conf. Rec. CDC, Vol. 2,
pp. 20112016.

Yépez, J., Martí, P. and Fuertes, J. M. (2002). Control
loop performance analysis over networked control systems, Conf. Rec. IECON 02, Vol. 4, Proc.
of the 28th IEEE Conf. Industrial Electronics Society, pp. 28802885.

strm, K. J. (2007). Event based control, Analysis and Design of Nonlinear Control Systems In
Honor of Alberto Isidori, Springer Verlag.
strm, K. and Wittenmark, B. (1997). ComputerControlled Systems Theory and Design, third
edn, Prentice Hall, New Jersey.

557