Anais do XIX Congresso Brasileiro de Automática, CBA 2012.

CALIBRACAO AUTOMATICA DE CAMERAS UTILIZANDO ODOMETRIA DE UM
ROBO MOVEL
Mariana Rampinelli, Raquel Frizera Vassallo, Teodiano Freire Bastos Filho, Daniel
Pizarro


Laboratorio de Automacao Inteligente
Universidade Federal do Esprito Santo
Vitoria, Esprito Santo, Brasil


Departamento de Electronica
Universidad de Alcala
Alcala de Henares, Madri, Espanha
Emails mariana@ele.ufes.br, raquel@ele.ufes.br, tfbastos@ele.ufes.br,
pizarro@depeca.uah.es
Abstract This work describes the implementation of an automatic calibration system for a set of cameras
in an intelligent space. An intelligent space is defined as an environment with a network of sensors able to obtain
information from the observed world and a network of actuators that allows its interaction with users. In such
case, the systems intelligence is at the environment. In such space, the artificial vision is potentially useful to
provide many kinds of information. However, in order to use artificial vision, the vision system must be properly
calibrated. For this reason, a calibration system for a set of cameras was developed. The field of view of theses
cameras can be overlapped or not. In order to make the process more automatic and less costly, a mobile robot
of the intelligent space was used with a calibration pattern. Approximate values of calibration parameters were
found from a known algorithm. Then, the robots odometry was used to optimize these calibration parameters.
Keywords

Intelligent Space, Computer Vision, Camera Calibration, Mobile Robot.

Resumo Este trabalho descreve a implementacao de um sistema de calibracao automatico de um conjunto
de cameras em um espaco_inteligente. Um espaco_inteligente e definido como um ambiente dotado de uma rede
de sensores capazes de obter informacoes do mundo que observa, e uma rede de atuadores que permitem sua
interacao com o usuario. Nesses casos, a inteligencia do sistema esta no proprio ambiente. No espaco_inteligente,
o uso de visao artificial e potencialmente util por proporcionar varios tipos de informacoes. No entanto, para
ser utilizado, o sistema de visao deve estar devidamente calibrado. Nesse sentido, foi desenvolvido um sistema
de calibracao para um conjunto de cameras cujo campo de visao pode ou nao ser sobreposto. De modo a tornar
o processo mais automatico e menos custoso, foi utilizado um robo_movel do proprio espaco_inteligente com
um padrao de calibracao. Valores aproximados dos parametros de calibracao foram encontrados a partir de
um algoritmo ja conhecido. Posteriormente, os dados da odometria do robo foram utilizados para otimizar os
parametros de calibracao. Simulacoes e experimento real obtiveram resultados satisfatorios.
Palavras-chave

.

Introducao

Em sua grande maioria, as pesquisas no campo de
robotica_movel estao concentradas no desenvolvimento de robos mais autonomos e capazes de realizar tarefas cada vez mais complexas. Para isso,
e necessario que os robos obtenham informacoes
acerca de seu ambiente de trabalho e de sua propria localizacao dentro desse ambiente. Com os
avancos no campo de rede de computadores e de
tecnologia multimdia, nos ultimos anos iniciaramse pesquisas sobre como transferir o sensoriamento
para o ambiente, permitindo o uso de robos mais
simples e, consequentemente, mais baratos, para
a realizacao de tarefas complexas.
Nesse contexto, iniciaram-se estudos sobre
os chamados Espacos ou Ambientes Inteligentes (Sasaki and Hashimoto, 2006 Chen et al.,
2007 Pizarro, 2009). Uma representacao de um
espaco_inteligente pode ser vista na Figura 1. O
espaco_inteligente e dotado de uma rede_de_sensores capaz de obter informacoes do mundo que

ISBN 978-85-8001-069-5

observa e uma rede de atuadores (robos, telas de
informacao, etc.) que permite sua interacao com
o usuario. Tais sensores sao inspecionados por um
sistema supervisorio capaz de analisar as informacoes obtidas e tomar decisoes.
Generated by Foxit PDF Creator  Foxit Software
httpwww.foxitsoftware.com For evaluation only.

Figura 1 Representacao tridimencional do espaco
inteligente.
As aplicacoes dos espacos inteligentes sao numerosas e englobam diversos campos da robotica
de servicos, tarefas de seguranca e vigilancia automatica e ajuda a pessoas com necessidades es-

1423

Anais do XIX Congresso Brasileiro de Automática, CBA 2012.

peciais. Especificamente, no grupo de pesquisa
da UFES, o espaco_inteligente montado sera aplicado para localizacao e guiagem de uma cadeira de
rodas robotizada desenvolvida pelo grupo de Robotica da mesma instituicao, a qual e mostrada
na Figura 2. A partir da integracao com a Interface Homem-Maquina desenvolvida pela UFES e
baseada no reconhecimento de intencao de movimento (Ferreira et al., 2008), pessoas com deficiencia motora severa, ou seja, pessoas que tenham
perdido todos os seus movimentos musculares voluntarios, poderao guiar a cadeira_de_rodas robotizada desde uma localizacao inicial ate uma localizacao final, utilizando unicamente sinais biomedicos. Esse e o caso, por exemplo, de pessoas com
Esclerose Lateral Amiotrofica, tumores na Medula
Espinhal, alguns tipos de Distrofia Muscular e outros tipos de deficiencia.
PDA

Sonares
Laterais

Sonares
Dianteiros

Câmera

Codificador
Ópticos
Sonares
Traseiros

Figura 2 Cadeira de rodas robotizada desenvolvida pela UFES.
A localizacao final para a qual a pessoa com
deficiencia deseja deslocar-se (por exemplo, banheiro, cozinha, quarto, etc.) pode ser escolhida
utilizando piscadas de olhos (sinais mioeletricos EMG), movimento do globo ocular (sinais videooculograficos - VOG) ou sinais cerebrais (sinais eletroencefalograficos - EEG) (Ferreira et al., 2008),
sendo possvel selecionar cones (smbolos) que representam os distintos ambientes e que podem ser
visualizados em um PDA (Personal Digital Assistant ou, em portugues, Assistente Digital Pessoal)
a bordo da cadeira_de_rodas. Uma vez escolhida a
localizacao final (smbolo pictograficos) para onde
a pessoa com deficiencia deseja se dirigir, o sistema de guiagem desenvolvido neste projeto devera conduzir a cadeira_de_rodas ate a localizacao
desejada.
No espaco_inteligente, o uso de visao artificial
e potencialmente util por proporcionar varios tipos de informacoes e o seu uso nao esta limitado
apenas ao posicionamento, mas tambem ao reconhecimento de objetos e gestos do usuario. Alem
disso, o campo de visao abrangido por uma camera e relativamente grande, quando comparado
ao campo de observacao de outros sensores. O espaco_inteligente construdo na UFES compoe-se de
11 cameras distribudas em dois laboratorios e no
corredor que conecta ambos. As cameras utiliza-

ISBN 978-85-8001-069-5

das sao do modelo DBK21AUC03 da The Imaging
Source, com sensor CMOS e conexao USB.
No entanto, as cameras de vdeo utilizadas
devem estar devidamente calibradas no ambiente
para permitir identificar e posicionar os robos_moveis, pessoas ou qualquer outro objeto presente no
espaco. No processo de calibracao sao estimados
os parametros intrnsecos, relativos as caractersticas internas, e extrnsecos, relativos ao posicionamento das cameras no ambiente. Esses parametros permitem a transformacao entre o sistema
de coordenadas da imagem para o sistema de coordenadas do mundo (Zhang, 1999 Hartley and
Zisserman, 2003 Sasaki and Hashimoto, 2006 Pizarro, 2009).
Nesse sentido, o objetivo deste trabalho e desenvolver um sistema de calibracao nao supervisionado para redes de cameras. Especificamente,
pretende-se abordar o problema existente em configuracoes de cameras na qual o grau de sobreposicao do campo de visao de todas elas e limitado.
De modo a tornar o processo automatico e
menos custoso, como e usual em diferentes sistemas (Rekleitis and Dudek, 2005 Chen et al.,
2007 Kamath, 2007), foi utilizado um robo_movel
do proprio espaco_inteligente equipado com um
padrao de calibracao convencional, de facil identificacao pelas cameras. Pelo movimento do robo
no espaco ocupado pelas cameras e pela deteccao
do padrao embarcado no robo, obtem-se a informacao visual que sera utilizada no algoritmo de
calibracao (Zhang, 1999). Tal informacao e, em
geral, incompleta, se existir um subgrupo de cameras que nao se conectam por sobreposicao dos
seus campos de visao, permitindo multiplas solucoes para seus parametros extrnsecos com respeito a uma origem de coordenadas no mundo.
Para resolver tal problema, este trabalho propoe
o uso da odometria do proprio robo, diretamente
integrada ao algoritmo de calibracao, fixando as
restricoes geometricas necessarias para resolver as
ambiguidades existentes.
O restante deste artigo organiza-se da seguinte forma na proxima Secao sao descritos o
modelo de camera considerado e a matematica do
algoritmo de calibracao proposto na Secao 3, demonstra o comportamento do algoritmo em algumas situacoes a partir de simulacoes e os compara
com os resultados de algoritmos de calibracao padroes essa mesma secao mostra os resultados de
experimentos realizados no Espaco Inteligente do
LAI-UFES finalmente, na Secao 4, sao apresentadas as conclusoes e propostas para trabalhos futuros.
2

Calibracao

Na reconstrucao 3D ou no calculo da posicao de
objetos no espaco utilizando cameras, e necessario
que se estabelecam relacoes entre as coordenadas
de pontos 3D com as coordenadas 2D do plano

1424

Anais do XIX Congresso Brasileiro de Automática, CBA 2012.

imagem.
Para uma camera i disposta no espaco_inteligente, existe um modelo de projecao geometrico mj,i
 h(Mj ,Xk ,Pi ) que relaciona um
k
ponto tridimensional Mj  (xj , y j , z j )T do padrao, referenciado a partir da origem de coordenadas do robo OR , quando o mesmo esta em Xk
referenciado no mundo (OW ), com sua imagem
T
mj,i
capturada no k-esimo instante
k  (uk , vk )
de tempo pela camera i, sendo j o ndice de cada
uma das N marcas do padrao. Essa relacao e definida a partir dos parametros da camera. Tais
parametros sao divididos em dois grupos intrnsecos e extrnsecos. Os parametros intrnsecos sao
necessarios para associar as coordenadas do pixel
de um ponto na imagem com o sistema de coordenadas da camera, OC i . Os parametros extrnsecos
relacionam o sistema de coordenadas da camera ao
sistema de coordenadas do mundo, OW .
O modelo de camera utilizado neste trabalho
e conhecido como pinhole. Nesse modelo, nao sao
considerados os parametros de distorcao, ou cisalhamento. Os parametros intrnsecos podem ser
agrupados na matriz Ki , para cada camera, descrita como

 i
fu 0 ui0
(1)
Ki   0 fvi v0i  ,
0 0 1
onde (u0 , v0 ) sao as coordenadas do ponto central
da imagem e fui e fvi sao o fator de escala no eixo
u e v, respectivamente. Os parametros extrnsecos sao os vetores 3D de translacao, Ti , em mm,
e  i , que e paralelo ao eixo de rotacao e cujo modulo e igual ao angulo de rotacao. O vetor  i esta
relacionado a matriz de rotacao Ri pela formula
de Rodrigues (Hartley and Zisserman, 2003). Os
parametros extrnsecos Ti e  i mudam a referencia do ponto em coordenadas do mundo OW para
coordenadas da i-esima camera, OC i (Hartley and
Zisserman, 2003). Desse modo, pode ser definido
um vetor de parametros da i-esima camera como
Pi  (fui , fvi , ui0 , v0i , (Ti )T , ( i )T )T .

(2)

Cada uma das M cameras utilizadas possui um
vetor Pi de parametros de calibracao distinto
dos demais, obtido a partir do processo de calibracao descrito a seguir. O vetor coluna P 


T  T
T
P1 , ..., PM
engloba todos os vetores
de parametros para todas as M cameras, representando a calibracao completa do espaco_inteligente.
2.1

Estimativa inicial dos parametros de calibracao

A primeira etapa do processo de calibracao obtem os valores iniciais para os parametros Pi da
i-esima camera do espaco_inteligente. Para isso,
foi utilizado o algoritmo de calibracao apresentado

ISBN 978-85-8001-069-5

em (Zhang, 1999), mas estendido para todas as M
cameras do espaco_inteligente que se deseja calibrar. Esse metodo utiliza apenas um padrao de
calibracao coplanar.
2.2

Robo movel com padrao de calibracao

O padrao de calibracao consiste em um conjunto
de N pontos cujas coordenadas tridimensionais
Mj , com j  1,    , N , sao conhecidas em relacao a um sistema de coordenadas de referencia.
Como a referencia do padrao nao coincide necessariamente com a referencia do robo, e necessario definir uma rotacao RRP e uma translacao
TRP que faca a mudanca de referencial do padrao para a do robo, dependendo do posicionamento do mesmo sobre o robo. Alem disso, o padrao esta desenvolvido sob uma estrutura rgida,
o que permite afirmar que seus pontos sao invariantes com o tempo e, desse modo, nao e necessario
o uso de sub-ndices temporais, k.
Os sensores de odometria obtem a posicao e a
orientacao, isto e, a postura do robo, no plano do
solo em relacao a um vetor inicial. O vetor inicial
define a postura do robo em relacao ao referencial
do mundo, OW . Neste trabalho, o uso do robo
movel concentra-se em espacos internos e, consequentemente, considera-se que o movimento do
mesmo encontra-se restrito ao plano x  y. Cada
vetor de postura no instante k e representado por
Xk  (xk , yk , k )T , onde xk , yk representam a posicao do robo no plano do solo, e k e a orientacao
do mesmo em relacao ao eixo z do mundo, que e
perpendicular ao plano do solo. Como simplificacao, sem perda de generalidade, considera-se que
a postura inicial do robo coincide com a origem
do sistema de coordenadas do mundo, OW , e com
angulo de rotacao zero.
Dada uma trajetoria do robo em um intervalo
de tempo k  0,    , K, e a postura do robo em
um instante inicial X0  (0, 0, 0)T , os sensores
de odometria do robo determinam a sequencia de
posturas X1 ,    , XK . O conjunto de posturas do
robo no intervalo k  1,    , K e definido como
T T
X  (X1T ,    , XK
) .
2.3

Medidas no plano imagem dos pontos do padrao em cada uma das cameras

A partir de cada camera do espaco_inteligente, sao
obtidas as medidas no plano imagem dos pontos
pertencentes ao padrao de calibracao. Para um
ponto Mj do padrao, estando o robo na postura
Xk , a camera i obtem a posicao no plano imagem
de tal ponto, definido como mj,i
k . Essa medida
pode ser prevista por
mj,i
k




h(Mj , Xk , Pi )
j,i i
k K (Ri (Rk Mj + Tk )

+ Ti ),

(3)

i
i
i
onde j,i
k e uma constante, K , R , T sao a forma
matricial dos parametros de calibracao da camera

1425

Anais do XIX Congresso Brasileiro de Automática, CBA 2012.

i e onde Rk e Tk sao obtidos a partir da postura
do robo Xk ,


cos(k )
Rk  sin(k )
0

sin(k )
cos(k )
0


0
0
1


xk

Tk  yk  .
0


(4)

O conjunto de todas as medidas obtidas pela
camera i na sequencia completa dos movimentos
do robo, e para todos os pontos do padrao, e definido por
N,i T
T
mi  (m1,i
1 ) ,    , (mK )

T

.

(5)

Do mesmo modo, define-se o vetor m como a
juncao de todas as medidas mi obtidas pelas M
cameras do espaco_inteligente
m  (m1 )T ,    , (mM )T

T

.

(6)

Utilizando a funcao h, definem-se facilmente
a relacao matematica h, na Equacao 7, entre os
parametros de calibracao de todas as cameras P,
o conjunto de poses do robo na trajetoria X e o
conjunto de medidas m
m  h(X, P).
2.4

(7)

Otimizacao dos parametros de calibracao

O algoritmo de calibracao consiste em um criterio de Maximo a Posteriori (MAP) para refinar
as posturas, estimadas pela odometria do robo, e
os parametros de calibracao que se desejam calcular. Para facilitar os calculos futuros, esses dados
sao reunidos em um unico vetor , definido como
  (PT , XT ). O criterio de MAP resume-se em
encontrar o maximo de
M AP  max p(m)p(),


(8)

onde p(m) e a funcao de densidade de probabilidade das medidas m, dados os parametros  e
a funcao p() e a funcao de densidade de probabilidade a priori dos parametros .
Para o calculo da funcao de densidade de probabilidade a priori dos parametros , supoe-se
que a distribuicao de probabilidade gaussiana que
representa as medidas de odometria p(X) e conhecida. Essa distribuicao e modelada a partir
de uma distribuicao gaussiana com matriz de covariancia X e um vetor media igual as medidas obtidas do robo X  X, como detalhado
em (Pizarro, 2009).
A funcao de densidade de probabilidade a priori p(P) dos parametros de calibracao P e modelada como uma distribuicao gaussiana com media P igual aos valores obtidos com o algoritmo
de (Zhang, 1999) e matriz de covariancia P obtida a partir dos erros de calibracao. Considerando que X e P sao estatisticamente independentes, pode-se obter a distribuicao a priori como
p()  p(X)p(P).

ISBN 978-85-8001-069-5

A funcao p(m) e obtida como uma distribuicao gaussiana tendo como media a funcao
m  h() e com matriz covariancia m diagonal
por blocos onde se estabelece a incerteza existente
ao medir os pontos do padrao (Pizarro, 2009).
O criterio MAP de (8) e equivalente a funcao de custo, mostrada na Equacao 9, obtida ao
aplicar logaritmos e eliminar constantes que nao
modificam o valor do mnimo

M AP  min (m  h())T 1
m (m  h()) +


(X  X)T 1
X (X  X) +

T 1
(P  P) P (P  P) .

(9)

Considerando-se que a distribuicao a priori
p(P) e desconhecida e supondo P  muito
grande, o ultimo termo pode ser eliminado, obtendo como resultado a funcao de custo simplificada

M AP  min (m  h())T 1
m (m  h()) +


(X  X)T 1
(10)
X (X  X) .
As funcoes de custo (9) e (10) podem ser minimizadas a partir de um metodo de otimizacao
iterativo, sendo que este trabalho utiliza o metodo de Levenberg-Marquardt (Hartley and Zisserman, 2003). E importante ressaltar que, geralmente, o problema definido por tais funcoes de
custo tem uma estrutura muito caracterstica que
pode ser aproveitada para reduzir a complexidade
de cada iteracao, chamada LM Sparse (Hartley
and Zisserman, 2003).
O metodo MAP definido pela Equacao 10 permite modelar a incerteza dada pela estimativa de
odometria. A distribuicao p(X) serve como meio
de penalizar os dados de odometria com maior
incerteza, ao mesmo tempo que forca que a solucao seja mais influenciada pelos valores com menor
incerteza. O resultado esperado e que os parametros de calibracao das cameras sejam melhorados
pelos valores iniciais de odometria, cuja estimativa
e mais precisa.
3

Resultados Experimentais

Para avaliar o algoritmo proposto neste trabalho,
foram realizadas simulacoes computacionais e experimentos reais, descritos a seguir.
3.1

Simulacoes

O desempenho do algoritmo de calibracao proposto neste trabalho foi avaliado em diversas perspectivas, cujas simulacoes sao descritas nas proximas subsecoes. Para tais situacoes, a camera
simulada possui as seguintes propriedades intrnsecas fu  718, fv  713, u0  430 e v0 
220. A resolucao da imagem e de 744  480 pixels. Os parametros extrnsecos da camera simulada sao dados por t  (646, 1150, 4400)T e
  (1, 7057, 1, 1823, 0, 5361)T .

1426

Anais do XIX Congresso Brasileiro de Automática, CBA 2012.
Erro de u0 e v0 x Nível de ruído

60

u0 Zhang
v0 Zhang
u0 novo algoritmo
v0 novo algoritmo

50
Erro Relativo ()

As simulacoes utilizam um padrao plano,
tipo xadrez, fixo no robo na posicao tP r 
(248, 249, 1167)T em mm, com rotacao representada por P r  (1, 2092, 1, 2092, 1.2092)T .
O robo percorre um caminho em uma sala de tamanho 8800 mm  4700 mm, sempre no campo
de visao da camera, como mostrado na Figura 3.

40

30

20

10

0
0

0.2

0.4

0.6

0.8
1
1.2 1.4
Nível de ruído (pixel)

1.6

1.8

2

(b)

Figura 4 Comparacao entre os erro relativo dos
parametros intrnsecos (a) fu e fv e (b) u0 e v0
utilizando o algoritmo de Zhang e o algoritmo proposto.
Erro no vetor de rotação x Nível de ruído

14

Rotação Zhang
Rotação novo algoritmo

Figura 3 Camera simulada e seu campo de visao
dentro do Espaco Inteligente, e caminho simulado
percorrido pelo robo.

Erro Relativo ()

12
10
8
6
4

Desempenho em relacao ao nvel de
rudo das medidas do padrao

A primeira simulacao teve por objetivo analisar
o desempenho do algoritmo com relacao ao nvel de erro nas projecoes dos pontos do padrao
nas imagens simuladas, m. Para isso, foi adicionado um rudo gaussiano com media   0 e
desvio padrao 0, 0    2, 0 pixels aos pontos
m. Para cada nvel de rudo, foram realizados 100
experimentos independentes, cujos resultados sao
mostrados como erro relativo dos parametros, nas
Figuras 4 e 5.
Erro de fu e fv x Nível de ruído

25

Erro Relativo ()

0.2

0.4

0.6

0.8
1
1.2 1.4
Nível de ruído (pixel)

1.6

1.8

2

1.8

2

(a)
Erro na translacao x Nível de ruído

40

Translação Zhang
Translação novo algoritmo

35
30
25
20
15

5
0
0

15

0.2

0.4

0.6

0.8
1
1.2 1.4
Nível de ruído (pixel)

1.6

(b)

10

Figura 5 Comparacao entre os erro relativo dos
parametros extrnsecos (a) de rotacao e (b) de
translacao utilizando o algoritmo de Zhang e o
algoritmo proposto.

5

0
0

0
0

10

fu Zhang
fv Zhang
fu novo algoritmo
fv novo algoritmo

20

2

Erro Relativo ()

3.1.1

0.2

0.4

0.6

0.8
1
1.2 1.4
Nível de ruído (pixel)

1.6

1.8

2

(a)

E possvel notar uma melhoria consideravel
dos parametros intrnsecos calculados pelo algoritmo proposto quando comparados aos valores encontrados pelo algoritmo de Zhang (Zhang,
1999). Segundo a literatura, o nvel de rudo nas
medidas da imagem em um experimento real sao
de aproximadamente 0, 5 (Zhang, 1999) e, para

ISBN 978-85-8001-069-5

esse nvel, o algoritmo proposto obteve erro relativo inferior a 1, 5 para parametros intrnsecos
e extrnsecos, enquanto o algoritmo de Zhang obteve erro relativo de aproximadamente 5 para
os parametros intrnsecos fu e fv e extrnsecos de
rotacao, e de aproximadamente 10 para os parametros intrnsecos u0 e v0 e extrnsecos de translacao. Mesmo para valores elevados de rudo, o
algoritmo consegue manter um erro relativo infe-

1427

Anais do XIX Congresso Brasileiro de Automática, CBA 2012.

rior a 10 para os parametros intrnsecos e 5
para os extrnsecos.

Erro no vetor de rotação x Nível de ruído

4.5
4
3.5

Desempenho em relacao ao nvel de
rudo da odometria

Erro Relativo ()

3.1.2

Em seguida, foi realizada uma simulacao para analisar o desempenho do algoritmo proposto com
relacao ao nvel de erro na odometria do robo,
X. Foi adicionado rudo as medidas da imagem
m com media   0, 0 e desvio padrao  
0, 5 pixels, o que corresponde a um valor maior
que o obtido em experimentos reais (Zhang, 1999).
A cada instante de tempo k, foi adicionado a postura do robo rudo gaussiano com media   0, 0
e desvio padrao 0, 0    20, 0 mm. Para cada
nvel de rudo, foram realizados 100 experimentos independentes, cujos resultados sao mostrados
como erro relativo dos parametros de calibracao,
nas Figuras 6 e 7.

2
1.5
1
0.5
0
0

Rotação Zhang
Rotação novo algoritmo
2

4

6

8
10
12
14
Nível de ruído (mm)

16

18

20

(a)
Erro na translacao x Nível de ruído

10
9

Erro Relativo ()

8

Erro de fu e fv x Nível de ruído

7

3
2.5

7
6
5
4
3
2

Erro Relativo ()

6

Translação Zhang
Translação novo algoritmo

1
0
0

5

2

4

6

8
10
12
14
Nível de ruído (mm)

4

16

18

20

(b)

3

Figura 7 Comparacao entre os erro relativo dos
parametros extrnsecos (a) de rotacao e (b) de
translacao utilizando o algoritmo de Zhang e o
algoritmo proposto.

2
fu Zhang
fv Zhang
fu novo algoritmo
fv novo algoritmo

1
0
0

2

4

6

8
10
12
14
Nível de ruído (mm)

16

18

20

(a)

tanto para translacao quanto para rotacao. E possvel observar que o algoritmo tambem proporciona melhorias na estimativa da postura do robo
ao longo do caminho percorrido, uma vez que ha
uma reducao do erro relativo apos a otimizacao
(linha preta), quando comparado ao erro relativo
antes da otimizacao (linha azul).

Erro de u0 e v0 x Nível de ruído

25

u0 Zhang
v0 Zhang
u0 novo algoritmo
v0 novo algoritmo

Erro Relativo ()

20

15

10

3.2

Experimento Real

5

0
0

2

4

6

8
10
12
14
Nível de ruído (mm)

16

18

20

(b)

Figura 6 Comparacao entre os erro relativo dos
parametros intrnsecos (a) fu e fv e (b) u0 e v0
utilizando o algoritmo de Zhang e o algoritmo proposto.
E possvel notar uma melhoria dos parametros
intrnsecos e extrnsecos calculados pelo algoritmo
proposto quando comparados aos valores encontrados pelo algoritmo de Zhang (Zhang, 1999).
Apenas para fv , a partir de   15, 0 mm, os
valores obtidos pelos algoritmos de Zhang e o proposto se equivalem. A Figura 8 mostra o desempenho do algoritmo na otimizacao da odometria,

ISBN 978-85-8001-069-5

O experimento realizado no Espaco Inteligente da
UFES utilizou um robo_movel Pioneer 3-AT, emulando uma cadeira_de_rodas robotica, ao qual foi
acoplado um padrao de calibracao tipo xadrez. Os
parametros de calibracao calculados sao mostrados na Tabela 1.
As posturas do robo ao longo do experimento,
estimadas pela odometria, podem ser vistas juntamente com as posturas otimizadas, na Figura 9.

4

Conclusoes e Trabalhos Futuros

Neste trabalho foi desenvolvido um sistema de calibracao automatico de uma rede de cameras de
um espaco_inteligente. As simulacoes, realizadas
em duas situacoes distintas, mostraram que o do
algoritmo proposto obteve melhorias no calculo

1428

Anais do XIX Congresso Brasileiro de Automática, CBA 2012.
Erro de Odometria  translação

220

Tabela 1 Parametros de calibracao calculados no
experimento.
Zhang Algoritmo proposto

Translação Inicial
Translação Final

200

Erro Relativo (mm)

180
160
140
120
100

fu
fv
u0
v0

751,47
740,37
351,96
281,18

765,49
775,03
387,57
286,63



1,12
-1,36
1,33

1,07
-1,44
1,41

t

197,47
1.420,22
1.344,13

115,81
1.409,09
1.398,71

80
60
0

2

4

6

8
10
12
14
Nível de ruído (mm)

16

18

20

(a)
Erro de Odometria  rotação

5.5

Rotação Inicial
Rotação Final
5

Erro Relativo ()

Odometria do robô antes e após otimização

4.5

2000

4

1500

3.5

1000
500

2.5
0

Y (mm)

3

2

4

6

8
10
12
14
Nível de ruído ()

16

18

0

20
500

(b)
1000

Figura 8 Otimizacao da odometria do robo (a)
erro de translacao e (b) rotacao, antes da otimizacao (azul) e apos otimizacao (preto).

dos parametros da camera frente ao algoritmo convencional. Tambem foi realizado um experimento
real utilizando um robo_movel, cujos resultados
foram satisfatorios. Simulacoes e experimentos
futuros serao realizados com um sistema multicameras desenvolvido no LAI-UFES.
Agradecimentos
Os autores agradecem ao CNPq (Processo
4824562007-8), a CAPES (Convenio CAPESMECD-DGUEspanha, no 15007) e a FAPES
(projeto no 454432112009) pelo financiamento
deste trabalho.
Referencias
Chen, H., Matsumoto, K., Ota, J. and Arai, T. (2007).
Self-calibration of environmental camera for mobile robot navigation, Robotics and Autonomous
Systems 55(3) 177190.
Ferreira, A., Cardoso, W., Cheein, F. A., Bastos Filho,
T., Sarcinelli Filho, M. and Carelli, R. (2008).
Human-machine interfaces based on emg and eeg
applied to robotic systems, Journal of NeuroEngineering and Rehabilitation 5 1 15.
Hartley, R. and Zisserman, A. (2003). Multiple View
Geometry in computer_vision, Cambridge University Press, Cambridge.

ISBN 978-85-8001-069-5

1500
0

500

1000

1500

2000 2500
X (mm)

3000

3500

4000

4500

Figura 9 Odometria do robo medida (vermelho)
e otimizada (azul).
Kamath, S. (2007). Distributed algorithms for camera
network localization and multiple target tracking
using mobile robots, Dissertacao (mestrado), Faculty of Rensselaer Polytechnic Institute, Troy,
Nova Iorque (EUA).
Pizarro, D. (2009). Localizacion de robots moviles
en espacios inteligentes utilizando camaras externas y marcas naturales, Tese (Doutorado), Universidad de Alcala, Escuela Politecnica Superior,
Departamento de Electronica, Alcala de Henares
(Madrid).
Rekleitis, I. and Dudek, G. (2005). Automated calibration of a camera sensor network, Proceedings of International Conference on Intelligent
Robots and Systems, 2005. (IROS 2005). 2005
IEEERSJ, pp. 3384  3389.
Sasaki, T. and Hashimoto, H. (2006). Camera calibration using mobile robot in intelligent space,
SICE-ICASE, 2006. International Joint Conference, IEEE Computer Society, Los Alamitos,
CA, USA, pp. 26572662.
Zhang, Z. (1999). Flexible camera calibration by viewing a plane from unknown orientations, International Conference on Computer Vision 1 666
673.

1429