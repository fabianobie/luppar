Anais do XX Congresso Brasileiro de Automática
Belo Horizonte, MG, 20 a 24 de Setembro de 2014

LOCALIZACAO E MAPEAMENTO SIMULTANEOS UTILIZANDO OTIMIZACAO
POR ENXAME DE PARTICULAS
Rodrigo Dias de Carvalho, Nadia Nedjah, Luiza de Macedo Mourelle


Centro de Tecnologia SENAI Automacao e Simulacao



Departamento de Engenharia de Sistemas e Computacao
Faculdade de Engenharia, Universidade do Estado do Rio de Janeiro
Emails carvrodrigo@gmail.com, nadia@eng.uerj.br, ldmm@eng.uerj.br
Abstract The capability of autonomous robots to localize themselves and simultaneously map unknown
environments, without any human intervention, allows that the exploration of the unknown evolves to new levels.
It is necessary to enhance the ability of the robot to reach the right decision and act accordingly at all stages
during localization and mapping. Complete autonomy is still far from being achieved due to the complexity
of the task of navigating through unknown locations while capturing information about the environment by
building a map and self localising within that map. Errors generated by the inaccuracy of the sensors that are
used to estimate the location prevent from the achievement of reliable results after long navigation periods. This
paper proposes a new algorithm for simultaneous localization and mapping. This algorithm is based on particle
swarm optimization and allows determining the robot location based on the overlap of the sensor readings and
map updates done as the robot moves into the unknown. A occupancy grid map that is used to represent the
environment is built incrementally. To evaluate the performance of the proposed methodology the Pioneer P3DX
autonomous robot from Mobile Robots is used.
Simultaneous Localization and Mapping, Metric Maps, Particle Swarm Optimization.

Keywords

Resumo A capacidade de robos_autonomos se localizarem e simultaneamente mapearem ambientes desconhecidos, sem qualquer tipo de intervencao humana, permite que a exploracao do desconhecido evolusse para
novos patamares. E preciso aprimorar a capacidade do robo de decidir e agir durante todas as etapas de localizacao e mapeamento. A completa autonomia esta ainda longe de ser atingida, devido a complexidade da tarefa de
navegar por um local desconhecido sendo necessario, ao mesmo tempo, capturar informacoes sobre o ambiente,
construir um mapa e localizar-se no mesmo. Os erros gerados pela imprecisao dos sensores que sao utilizados
para estimar a localizacao impedem que sejam obtidos resultados confiaveis apos longos perodos de navegacao.
Este artigo propoe um novo algoritmo para localizacao_e_mapeamento_simultaneos. Este algoritmo e baseado em
otimizacao por enxame de partculas e permite determinar a localizacao do robo baseando-se na sobreposicao
das leituras do sensor com o mapa que o robo atualiza conforme avanca no desconhecido. Um mapa de grade
de ocupacao que representa o ambiente e construdo de forma incremental. Para avaliacao do desempenho da
metodologia proposta, foi utilizado o robo_autonomo Pioneer P3DX da Mobile Robots.
Palavras-chave

.

xame de partculas. A Secao 4 descreve a metodologia proposta para solucionar o problema de
SLAM. A Secao 5 apresenta e analisa os resultados obtidos, utilizando o robo Pioneer P3DX da
Mobile Robots. A Secao 6 conclui o artigo e apresenta sugestoes para melhorias do trabalho.

Introducao

Localizacao e mapeamento simultaneos (Simultaneous Localization and MappingSLAM) representa um dos maiores desafios que a robotica_movel autonoma enfrenta na atualidade. Os robos
autonomos utilizam os sensores para obter pontos
de referencia e entao planejar a navegacao, se localizando a cada instante. O SLAM consiste em
navegar por um ambiente desconhecido com a finalidade de construir um mapa e localizar-se no
mesmo simultaneamente. Os erros gerados e acumulados pela imprecisao dos sensores dificultam a
obtencao de resultados confiaveis apos longos perodos de navegacao.
Otimizacao por enxame de partculas e a tecnica utilizada, neste artigo, para localizar o robo.
O mapeamento e realizado atraves de mapa metrico. Ambos os conceitos serao detalhados no decorrer do artigo.
Este artigo e organizado em cinco secoes Secao 2 introduz conceitos e desafios da localizacao
e mapeamento simultaneos. A Secao 3 aborda o
funcionamento do algoritmo_de_otimizacao por en-

2

Localizacao e Mapeamento Simultaneos

A necessidade de realizar localizacao_e_mapeamento_simultaneos ocorre quando o robo nao possui conhecimento da sua posicao no ambiente real
e nem dispoe de uma representacao do ambiente
ao seu redor para se referenciar. Para que o robo
possa mapear as informacoes coletadas, e necessario que o algoritmo de SLAM saiba aonde essas
observacoes foram realizadas. Ao mesmo tempo,
e difcil estimar a posicao atual do robo sem um
mapa.
A Figura 1 ilustra a pose Pt +t do robo em diferentes instantes t + t. A pose do robo e definida
por tres dimensoes abscissa, ordenada e o angulo
 formado entre a frente robo e o eixo horizontal.
A medida que o mapa do ambiente e atuali-

47

Anais do XX Congresso Brasileiro de Automática
Belo Horizonte, MG, 20 a 24 de Setembro de 2014

plora o ambiente por um tempo constante, e considera o ambiente estatico.
2.1

Localizacao

O robo nao possui nenhum conhecimento a priori
sobre a sua pose de partida, visto que a localizacao consiste em estimar a sua pose em relacao
a um mapa. Ele precisa ser capaz de localizarse dentro do ambiente no qual esta inserido, seja
utilizando inicialmente um mapa com a representacao completa do ambiente ou atraves dos sensores para criar a representacao conforme explora o
desconhecido. Para navegar de um ponto a outro
e necessario um controle que permita sua movimentacao e que seja capaz de calcular iterativamente sua nova pose durante todo deslocamento
da forma mais precisa possvel, medindo a distancia a que se encontra do seu destino.
O real desafio na localizacao do robo reside na
correta associacao de dados coletados do sensor e
a modelagem do ambiente. A associacao de dados
refere-se ao processo que determina a origem das
medidas coletadas do sensor e seu correspondente
na representacao adotada. Seja z uma medicao da
distancia entre o robo e um obstaculo, por exemplo, e M o mapa que representa o ambiente. A
associacao de dados permite encontrar para cada
z uma correspondencia em M . A definicao dessa
correspondencia depende de M .

Figura 1 Distancia relativa entre robo e marcos e
ilustracao da pose do robo no instante t+2.

zado, as estruturas do ambiente real sao reconhecidas e acrescentadas. A Figura 1 ilustra o erro
relativo entre o robo e as estruturas ao seu redor, de acordo com as leituras feitas pelo sensor.
Quando a localizacao do robo no mundo real nao
e conhecida ou nao pode ser medida diretamente,
as observacoes sao realizadas entre a posicao real e
localizacao estimada das estruturas reconhecidas.
E possvel notar que o erro entre a estimativa e
a posicao real da localizacao das estruturas esta
correlacionado com os erros ocasionados pelas medicoes anteriores. A localizacao relativa entre os
pontos representados por a1 e a2 e conhecida com
precisao. O erro acumulado desloca toda a estrutura do mapa. Com o passar do tempo o robo
nao conseguira mais se localizar nem representar
os obstaculos corretamente no mapa.
Todos os sensores existentes atualmente no
mercado estao sujeitos a limitacao de hardware
e erros. Estes erros se nao forem tratados, podem impossibilitar navegacao atraves do ambiente
(Thrun et al., 1998). Assim, uma solucao eficaz ao
problema de SLAM deve sempre procurar minimizar o erro de estimativa, pois a degradacao progressiva da qualidade do mapa obtido com certeza
influenciara negativamente o processo de obtencao
de novas estimativas de localizacao.
Durante a navegacao, o robo pode retornar
a algum ponto ja mapeado anteriormente. Neste
caso, se os obstaculos estaticos identificados pelo
mapeamento atual nao coincidem com os mapeados previamente, todo o mapeamento realizado
fica com sua confiabilidade comprometida. Tal
problema e conhecido como fechamento de volta.
Outro problema, relacionado indiretamente ao fechamento de volta, e a correta identificacao se o
obstaculo e estatico ou dinamico. Os comportamentos dinamicos do ambiente ainda nao possuem
uma solucao ideal (Thrun et al., 2005). Ademais
a maioria dos algoritmos existentes de SLAM ex-

2.2

Mapeamento

O mapeamento e a integracao das informacoes obtidas pelos sensores do robo a uma determinada
representacao do ambiente, parcialmente desconhecido. Durante a realizacao desta tarefa, e indispensavel a utilizacao de sensores com capacidade de perceber o ambiente, tal como sonares,
cameras ou laser de varredura. Conforme se movimenta, o robo realiza observacoes das estruturas
ao seu redor e decide se simplesmente pode reagir em consequencia. Ao mapear uma regiao do
ambiente, o robo deve classifica-la se a regiao for
um novo espaco explorado deve ser adicionada ao
mapa, ou seja, caso ja tenha sido visitada antes, a
parte do mapa correspondente deve ser atualizada
com base nos dados atuais.
Devido a imprecisao dos sensores, as informacoes adicionadas ao mapa nao possuem valores exatos, representando uma estimativa da
realidade. Os erros podem ser corrigidos atraves do acumulo de informacoes colhidas (Nieto
et al., 2003), permitindo que erros aleatorios sejam
eliminados. Cada tipo de abordagem em mapeamento apresenta caractersticas distintas em relacao a representacao do ambiente, quantidade de
memoria e tempo de execucao. A escolha de um
tipo de representacao pode impossibilitar a utilizacao de uma abordagem especfica (Slamet and
Pfingsthorn, 2009).

48

Anais do XX Congresso Brasileiro de Automática
Belo Horizonte, MG, 20 a 24 de Setembro de 2014

As informacoes contidas nos mapas podem representar diferentes aspectos, como por exemplo,
as distancias entre os obstaculos, a mudanca de
ambientes, etc. Cada implementacao de mapeamento guarda um tipo de informacao diferente.
O Mapa metrico e uma das possveis representacoes usadas durante mapeamento. Este tipo de
mapa permite reproduzir a geometria do ambiente
no qual o robo esta inserido. Objetos como paredes, obstaculos e passagens sao facilmente identificados, ja que o mapa mantem uma boa relacao
topografica com o mundo real. Os mapas_metricos
sao representados por mapas de caractersticas e
grades de ocupacao (Elfes, 1989).
Utilizando mapas_metricos, os espacos contnuos do ambiente sao discretizados, de maneira
que o ambiente passa a ser representado por uma
matriz com duas ou tres dimensoes. Cada elemento da matriz, chamado de celula, representa
um local do ambiente que pode conter informacoes, de acordo com uma formulacao probabilstica idealizada vazio, ocupado ou ainda um local
inexplorado. O estado ocupado e representado por
valores que refletem o grau de probabilidade do
obstaculo estar la ou em local proximo.
Os mapas_metricos exigem um alto esforco
computacional e uma grande quantidade de memoria, ja que tendem a crescer conforme o tamanho da area explorada durante o mapeamento.
A Figura 2 mostra um exemplo de mapa metrico do tipo grade_de_ocupacao. As celulas em
preto representam objetos detectados pelo sensor
de varredura, aquelas em branco identificam regioes livres ou nao ocupadas, e as em cinza sao
areas ainda nao exploradas. Note que os mapas
metricos podem ser usados diretamente em tarefas de navegacao, tais como planejamento_de_caminhos com desvio_de_obstaculo e estimativa de
posicao (Slamet and Pfingsthorn, 2009).

velocidade adaptativo, diferente para cada dimensao.
Cada partcula do enxame ajusta sua posicao
no espaco de busca de acordo com o conhecimento
da sua melhor posicao, assim como da melhor posicao encontrada pelo enxame. A posicao da partcula i e designada por vetor xi , representando
as coordenadas em cada dimensao da partcula i.
Mudancas na posicao de uma partcula podem ser
definidas como uma variacao incremental da posicao anterior, conforme Equacao 1
xi (t)  xi (t  1) + vi (t),

(1)

onde o vetor de velocidade vi e somado as coordenadas de posicao com o objetivo de mover a
partcula.
O valor e direcao do vetor de velocidade e reflexo da iteracao anterior, tendo como tendencia
apontar para a melhor solucao encontrada anteriormente, guiando o processo de otimizacao. A
velocidade e definida conforme Equacao 2

vi (t)  Inerciai (t  1) + Cognitivoi (t  1) + Sociali (t  1),

(2)
onde Inercia e utilizado para balancear a pesquisa
local e global. Um alto peso de inercia facilita
uma busca global, enquanto um baixo peso facilita
a busca local. O termo Cognitivo representa o
uso da experiencia da partcula, enquanto o termo
Social o uso da experiencia das outras partculas
do enxame. Com o ajuste dos pesos associados
aos termos Cognitivo e Social pode-se balancear
a valorizacao do conhecimento local e global. O
termo Inerciai e definido conforme Equacao 3
Inerciai (t)  wvi (t  1).

(3)

E o resultado da velocidade anterior vi ponderado
por w, chamado de coeficiente de inercia. Pode
ser tanto uma constante quanto uma funcao nao linear de tempo (Shi and Eberhart, 1998). O termo
Cognitivoi e definido conforme Equacao 4
Cognitivoi (t)  c1 r1 (xi (t  1)  xi (t  1)), (4)
onde c1 regula a forca de atracao para a melhor
posicao xi da partcula i e r1 e um valor aleatorio
gerado na faixa 0,1.
O termo social e definido pela Equacao 5

Figura 2 Ilustracao de um mapa metrico.

3

Otimizacao por Enxame de Partculas

A otimizacao por enxame de partculas (Particle Swarm OptimizationPSO), simula o comportamento coletivo dos passaros (Kennedy and
Eberhart, 1995). Um conjunto de partculas representa as possveis solucoes do problema. Atraves da avaliacao das partculas posicionadas no
espaco de busca possivelmente multidimensional.
No PSO, cada partcula e dotada de um vetor de

Sociali (t)  c2 r2 (x(t  1)  xi (t  1)),

(5)

onde c2 esta relacionado ao conhecimento da melhor posicao global x alcancada pelo enxame e r2
e um valor aleatorio gerado na faixa 0,1.
O PSO tem duas abordagens mais comuns,
sendo a unica diferenca entre elas a vizinhanca da
partcula usada no calculo do termo social uma

49

Anais do XX Congresso Brasileiro de Automática
Belo Horizonte, MG, 20 a 24 de Setembro de 2014

permite a troca de informacoes entre todas as partculas do enxame, nomeada de global best PSO, e
a outra so permite a comunicacao com os vizinhos
mais proximos, sendo chamado de local best PSO.
O Algoritmo 1 apresenta o global best PSO
para maximizacao da funcao objetivo f , onde xi
indica a melhor posicao alcancada pela partcula
i e x a melhor posicao registrada por todo o enxame. As partculas sao inicializadas aleatoriamente no espaco de busca. Os limites minj e
maxj sao, respectivamente, mnimo e maximo do
espaco de busca na dimensao j, sendo d o numero de dimensoes. Se a condicao de termino
estiver sido atingida, o algoritmo retorna o melhor resultado obtido pelo enxame. Caso contrario, um novo valor de posicionamento e calculado
para cada partcula. Apos o calculo de velocidade
atraves da Equacao 2, e possvel aplicar um limitador de velocidade para evitar que a partcula seja
projetada para fora do espaco de busca. A funcao
rand() permite gerar um novo numero aleatorio
entre 0, 1 a cada chamada. A melhor posicao
atingida pela partcula xi e atualizada caso a aptidao de xi seja melhor que a da posicao anterior
da partcula i. Tambem e realizada a atualizacao
da melhor posicao global, x, caso a nova aptidao
de xi seja melhor do que aquelas de todas as outras posicoes das partculas do enxame. Note que
o criterio_de_parada pode ser um numero maximo
de iteracoes ou certa qualidade pre-definida da solucao xi .

e classificada como obstaculo. Os obstaculos bloqueiam a passagem do robo e sao representados
por cores escuras no mapa. Se o valor da celula
e menor que 0, a celula e classificada como area
livre para circulacao, sendo representada por cores claras. O robo so pode se movimentar atraves
das celulas com esta classificacao. Caso o valor
da celula seja 0, a celula e classificada como area
ainda nao foi explorada. Celulas contem este valor ate que o sensor de varredura possa explora-la
e possuem a cor cinza 50.
A Figura 3(a) ilustra a representacao visual
do mapa mg utilizando os valores definidos em
cada celula. A linha fina em cinza ilustra o caminho percorrido pelo robo calculado durante a
execucao do algoritmo. A Figura 3(b) representa
a ampliacao de uma pequena regiao do mapa mg.
A Figura 3(c) ilustra a regiao da matriz mg com os
valores que definiram as cores da regiao destacada
na Figura 3(b).

Algoritmo 1 Algoritmo PSO para global best
for j  1  d do
xi,j  minj + rj (maxj  minj )
vi  0 xi  xi  x  xi
repeat
for i  1  n do
xi  xi + vi
if f (xi )  f (xi ) then
xi  xi
if f (xi )  f (x) then
x  xi

(a) Representacao do mapa

(c) Regiao da Matriz mg correspondente ao destaque

vi  wvi + c1 rand() (xi  xi ) + c2 rand() (x  xi )

Figura 3 Representacao visual do mapa do ambiente real a partir da matriz mg

until Condicao de parada
retorne x

4

(b) Destaque

A pose do robo e definida por r 
(xr , yr , r ), onde xr representa a abscissa e yr a
ordenada do mapa mg. O valor de r e definido
pelo angulo que a frente do robo forma com eixo
horizontal, conforme ilustrado pela Figura 4.
O Algoritmo usa conjunto R de leituras correspondentes aos raios obtidos pelo sensor, onde
R  r1 , r2 , ..., r . Cada raio rj  R e representado pelo par rj  (dj , j ), onde dj e a distancia
relativa entre o robo e o obstaculo encontrado pelo
raio rj e j o angulo que o raio rj faz em relacao
a frente do robo, conforme Figura 5.
Cada raio rj possui angulo  em relacao ao
raio adjacente, onde   j+1  j , sendo l o

Proposta de SLAM com PSO

Essa Secao descreve a metodologia proposta para
a resolucao do problema de SLAM. O ambiente
real e representado atraves do mapa global mg,
implementado atraves de matriz de grade_de_ocupacao. A discretizacao do espaco de mg e feita
por celulas quadradas com lado de tamanho .
Cada celula possui um valor que define se a regiao
do ambiente real representada esta ocupada, livre
ou ainda nao foi explorada, conforme classificacao
Caso o valor da celula seja maior que 0, a celula

50

Anais do XX Congresso Brasileiro de Automática
Belo Horizonte, MG, 20 a 24 de Setembro de 2014

coordenadas identificadas por x1 , x2 e x3 . Nesta
abordagem a partcula representa a pose do robo.
Portanto, tem-se x1 relacionado a abscissa, x2 a
ordenada do mapa mg e x3 ao angulo da pose .
Para cada pose um valor representando a aptidao
e atribudo a partcula. Esse valor de aptidao define o quao proximo da pose real do robo cada
partcula se encontra. A partcula que possuir o
maior valor de aptidao ao final da execucao do
P SO define a pose do robo para o conjunto de
leituras R avaliadas.
A funcao objetivo foi inspirada em tecnicas
conhecidas como correspondencia entre leituras
(Besl and McKay, 1992). Tal tecnica tem como
princpio ajustar o alinhamento entre sucessivas
leituras realizadas pelo sensor.
Para avaliacao de cada partcula os valores de comprimento dos raios dj sao convertidos
em coordenadas Cartesianas multiplicando-se pelo
cosseno e seno do angulo j . O angulo j e formado pela soma do angulo x3 da partcula com
o angulo j do raio j. Considerando a posicao
da partcula (x1 , x2 , x3 ), as Equacoes 6 e 7 calculam a projecao na abscissa e na ordenada do mapa
global.

Figura 4 Pose do robo no mapa mg

Figura 5 Representacao dos raios r1 e r2 .
valor utilizado para localizacao e m o valor para
mapeamento.
A relacao  e utilizada para definir a quantidade de raios que serao utilizados pelo algoritmo
na localizacao e no mapeamento. Para localizar o
robo o ideal e aumentar o tamanho do angulo l
entre os raios para aumentar a velocidade de execucao do algoritmo. Para mapear o ambiente, o
ideal e diminuir o angulo m , garantindo uma resolucao maior para a mesma area de varredura.
4.1

pxj  x1 + (dj  cosseno(j )),

(6)

pyj  x2 + (dj  seno(j ))

(7)

e

j  x3 + j ,

(8)

onde pxj e pyj representam as coordenadas Cartesianas do raio rj no mapa global a partir da
posicao x1 , x2 e x3 da partcula avaliada.
O algoritmo proposto utiliza tambem os valores das celulas adjacentes a coordenada pxj e
pyj de cada raio j. Utilizando uma matriz vizinhanca mv de tamanho   , sendo  mpar,
os valores das celulas sao ponderados de acordo
com a distancia que as celulas se encontram da
coordenada pxj , pyj  avaliada. As variaveis 0 ,
1 ,  1 definem o peso de cada celula avaliada
2
pela matriz mv. A variavel 0 define o peso da
celula pxj , pyj . A matriz vizinhanca e representada por

Localizacao

O espaco de busca do algoritmo de localizacao e
definido por uma area de Q  Q milmetros quadrados ao redor da ultima pose do robo r . O
tamanho de Q e definido durante a inicializacao
de cada instancia do PSO. A Figura 6 ilustra o
espaco de busca Qr+1 para a pose r+1 sobre a
posicao conhecida r do robo.

 1   1  1  1  1  1   1
2

..
.

2

..

.

 1 

mv 

..
.

2

..
.

..
.

2

..
.

2

..
.

2

..

.

..
.

2

2

2

2

2

  1

2

1

1

1

2

  1



2

1

0

1

2

  1



2

1

1

1

2

  1



2

2

2

2

2

  1

..

..
.

..
.

..
.

..
.

..
.

2

 1 
2
 1
2
 1
2
 1
2

2

..
.

2
2
2
2
2

.

..

.

..
.

 1   1  1  1  1  1   1
2

2

2

.

2

2

2

2

O somatorio  de todos os pesos da vizinhanca
pode ser obtido pela Equacao 9
Figura 6 Espaco de busca para pose r+1 .

A partcula possui tres dimensoes, sendo as





2
X

2
X

m 2 n 2

51

mvm, n.

(9)

Anais do XX Congresso Brasileiro de Automática
Belo Horizonte, MG, 20 a 24 de Setembro de 2014

A Equacao 10 define a funcao objetivo que avalia
a posicao de cada partcula no espaco de busca,
levando em conta os raios em R


P

f (xi ) 


+
P2


+
P2

mggj,m , gj,n   mvm, n

j1 m  n 
2
2

,


(10)
onde f (xi ) e o valor de aptidao da partcula xi e
gj,m  pxj + m, e gj,n  pyj + n ambas definindo
a coordenada Cartesiana em relacao ao mapa mg.

Figura 8 Ilustracao do processo de correspondencia entre mapa global mg e leitura do sensor.

A funcao objetivo possui um grande custo
computacional. E necessario iterar pelas leituras
do sensor e verificar para cada uma a existencia de
obstaculos proximos. Divide-se o espaco de busca
de tamanho Q  Q em quatro partes iguais ao redor do robo, conforme mostra a Figura 7. Com
a subdivisao e possvel executar varias instancias
do algoritmo de PSO em paralelo.

4.2

Mapeamento

Apos a definicao da pose do robo r , o mapa representando o ambiente e atualizado utilizando as
leituras R do sensor a partir da pose r em mg.
Atraves desta atualizacao o robo explora o ambiente ao seu redor adicionando novos obstaculos ao
mapa.
O Algoritmo 2 realiza a atualizacao do mapa.
Para isso cada um dos raios j, sao discretizados
com um passo de tamanho . Note que cada raio
j tem seu alcance maximo definido por . Alterando o valor maximo  do raio pode-se variar
a distancia maxima a ser mapeada do ambiente.
Itera pelos angulos em  e tambem discretamente
em . Os valores de cada celula de mg sao classificados e atualizados de acordo com seu tipo ocupado, livre ou desconhecido. Para evitar a revisita
de celulas ja atualizadas no mapa, uma matriz viz
do mesmo tamanho de mg e usada para guardar as
celulas ja visitadas a cada execucao do algoritmo
de mapeamento, nao permitindo sobreposicao dos
valores ja calculados com base em outro raio, salvo
a celula em viz que tenha sido caracterizada como
livre.

Figura 7 Espaco de busca dividido.
A Figura 8 ilustra a avaliacao da aptidao de
seis partculas p1 p6 . As linhas contnuas representam o mapa global mg no momento que a leitura do sensor_laser foi efetuada. As linhas tracejadas sao o estado do mapa obtido apos interpretar
e integrar a leitura do sensor_laser, sendo avaliada
a partir do posicionamento e rotacao de cada partcula. A funcao objetivo deve atribuir valores de
aptidao tal que f (pi+1 ) > f (pi ), a sexta partcula
recebera o maior valor de aptidao. A leitura do
sensor e comum a todas as partculas, mas a sexta
partcula e a que esta na melhor pose ao verificar
a correta sobreposicao da leitura com o estado do
mapa ate o momento. As informacoes em tracejado serao entao acrescentadas ao mapa.

Algoritmo 2 Atualizacao do Mapa Global
Inicialize viz com desconhecido em cada celula
for j  1   do
for u  1   do
d
dj  j
x  (u  cos(r + j )) + xr
y  (u  sen(r + j )) + yr
if vizx,y  desconhecido then
if u < dj then
mgx, y  mgx, y  
vizx, y  livre
if u  dj then
mgx, y  mgx, y + 
vizx, y  ocupado
else
if vizx, y  livre e u  dj then
mgx, y  mgx, y + 
vizx, y  ocupado

A melhor partcula global best de todo o enxame e definida apos a execucao das quatro instancias do algoritmo PSO para localizacao. Cada
quadrante possui sua partcula com a maior aptidao entre as demais, e a partcula que possuir a
maior aptidao dentre todas as instancias define a
nova pose do robo r , onde xr  x1 , yr  x2
e r  x3 . A pose r e o local discretizado no
mapa mg de onde o conjunto raios R realizou a
varredura do ambiente ao redor do robo.

52

Anais do XX Congresso Brasileiro de Automática
Belo Horizonte, MG, 20 a 24 de Setembro de 2014

Ao verificar que a coordenada vizx, y nao
foi visitada, sendo classificada como desconhecido,
tres acoes podem acontecer se o raio encontra-se
antes da celula, ou seja, u < dj a celula e espaco
vazio e recebe um decremento de valor . Se as
coordenadas raio j possui o mesmo tamanho que
u, ou seja, u  dj a celula esta ocupada e recebe
um incremento de valor . Para valorizar uma
celula com valor ocupado, mesmo que outro raio a
tenha classificado como livre e verificado o caso de
que a coordenada do raio termina na celula. Caso
seja positivo, a celula do mapa global recebe um
incremento de valor . Quanto mais tempo o robo
passar fixo em uma regiao, maior sera a variacao
de valores entre as celulas classificadas como livre
e as classificadas como ocupadas na regiao, devido
ao incremento  e ao decremento  aplicados.
Raios curtos, com valor  baixo sao processados mais rapidamente que raios mais longos de
valor  alto. No entanto raios longos enriquecem
melhor o mapa do que raios curtos. O balanco entre a quantidade de raios  que atualizam o mapa e
o seu comprimento maximo  controlam a quantidade de informacao utilizada pelo algoritmo. Leituras mais proximas ao robo sao mais precisas. A
regiao proxima ao alcance maximo do sensor possui menor precisao. Isso se deve a discretizacao
das leituras do sensor para as unidades de medida utilizadas na matriz mg. Usar valores muito
pequenos em  podem nao registrar obstaculos a
medias distancias, fazendo com que o robo tenha
dificuldade quando realizar novamente a localizacao e utilizar o mapa atualizado para comparar
com as leituras atualizadas do sensor. O ideal e
utilizar valores para  que estejam alem do valor
da metade do alcance maximo do sensor.
5

Figura 9 Mapa conhecido.

Figura 10 Mapa gerado pelo SLAM com PSO.

Tabela 1 Valores dos parametros utilizados

Resultados Obtidos

Nome
Inercia
Cognitivo e Social
Lado de mv
Tam. Mapa global
Celulas de mv
Conjunto de Raios
Espaco de busca
Quantidade de raios
Angulo j+1  j
Angulo j+1  j
Celula de mg
Incremento em mg
Decremento em mg
Tamanho de raio

O robo terrestre Pioneer P3-DX da Mobile Robots, que possui sensor de varredura_a_laser Sick
LMS-100 e utilizado para avaliar a eficacia e eficiencia da metodologia proposta. A implementacao e executada em um computador embarcado do
tipo Mango em ambiente Debian Linux. O sensor
varre uma area de 270 graus ao redor do robo com
um raio maximo de 20 metros. Os resultados sao
calculados baseando-se em um mapa conhecido do
ambiente mostrado na Figura 9. E possvel notar
a trajetoria do robo atraves da linha fina contnua
em cinza na Figura 10.
Um vdeo demonstrando o processamento do
algoritmo enquanto o robo realiza a trajetoria da
Figura 10 foi produzido. Pode ser visitado atraves do endereco httpyoutu.beCYlb6ZcCSzU.
O espaco utilizado pelo robo se encontra no quinto
andar, bloco F, da Universidade do Estado do Rio
de Janeiro (UERJ).
A Tabela 1 lista os parametros e seus valores,
utilizados nessa implementacao.

Parametro
w
c1  c2

mg
0 , 1 , 2
R
Q

l
m





Valor
0,729
1,49445
5
30m
1, 2, 3
540
30mm
270
1 grau
0,5 graus
100mm2
-0,04
0,09
1800cm

Para as metricas de desempenho foram utilizados a media do erro quadratico (Mean Square
ErrorMSE) e o erro medio de afastamento entre
o mapa real e o gerado pelo SLAM. Foram seleci-

53

Anais do XX Congresso Brasileiro de Automática
Belo Horizonte, MG, 20 a 24 de Setembro de 2014

onados 10 pontos de interesse, em geral as quinas,
em cada ambiente, totalizando 40 pontos de medicao indicados nas Figuras 9 e 10.
Esses pontos no mapa real possuem seus pontos correspondentes no mapa gerado pela implementacao dos algoritmos propostos. O MSE foi
entao calculado atraves da Equacao 11
M SE 

X

q

( p2i + pi2 )2 ,

6

Neste artigo foi proposta uma nova abordagem
para resolucao do problema de SLAM. Um esforco
consideravel foi aplicado na elaboracao da localizacao do robo utilizando o PSO, criando uma
funcao objetivo tal que traduzisse a melhor sobreposicao entre o mapa global e a leitura do sensor
laser. Testado em um robo real, a implementacao
mostrou-se promissora realizando mapas a uma
resolucao de 100mm2 por pixel. E possvel melhorar a qualidade do mapa gerado ajustando de
uma maneira fina os parametros do algoritmo ,
alcance maximo de um raio, , valores de  e 
usados para atualizar o mapa global, alteracoes
nos valores de w1 , w2 e w3 na matriz de vizinhanca. O mapa demonstra um fechamento de
volta satisfatorio quando se avalia a precisao.

(11)

pi mg

onde mg e o mapa global gerado, pi e um ponto

selecionado em mg, pi e o seu correspondente no
mapa conhecido. A notacao utilizada e de pixels
quadrados. Cada celula no mapa global representa
um pixel.
A Tabela 2 mostra os valores encontrados em
cada ambiente e o total medio. O erro medio de
afastamento foi realizado atraves da media entre

todas as distancias pi e seu pi correspondente convertidos em milmetros.

Referencias
Besl, P. J. and McKay, N. D. (1992). Method for
registration of 3-d shapes, Robotics-DL tentative, International Society for Optics and
Photonics, pp. 586606.

Tabela 2 Precisao alcancada pelo algoritmo
Local
Corredor
Copa
Copinha
A. Externa
Total

MSE
58,73
158,81
10,09
13,80
60,35

Conclusoes

Erro de afastamento
65,6
87,9
23,1
30,3
51,7

Elfes, A. (1989). Using occupancy grids for mobile
robot perception and navigation, Computer
(6) 4657.
Kennedy, J. and Eberhart, R. (1995). Particle swarm optimization, Proceedings of the
1995 IEEE International Conference on Neural Networks, IEEE, Perth, WA , Australia,
pp. 1942 1948 vol.4.

Considerando uma area de 3030 metros quadrados, o algoritmo ocasiona um erro medio de
afastamento de 51, 7mm entre uma regiao mapeada e a sua regiao correspondente no ambiente
real.
A Figura 11 ilustra o valor de aptidao atribuda a melhor partcula do enxame ao longo da
execucao do algoritmo de PSO para cada pose r
do robo. As variacoes no grafico ocorrem quando
o robo muda de direcao. As regioes ainda nao mapeadas diminuem o valor de aptidao da partcula.
E possvel notar a precisao do posicionamento aumentando a medida que o robo permanece na regiao mapeada.

Nieto, J., Guivant, J., Nebot, E. and Thrun, S.
(2003). Real time data association for fastslam, Robotics and Automation, 2003. Proceedings. ICRA03. IEEE International Conference on, IEEE, pp. 412418.
Shi, Y. and Eberhart, R. (1998).
A modified particle swarm optimizer, Evolutionary Computation Proceedings, 1998. IEEE
World Congress on Computational Intelligence., The 1998 IEEE International Conference on, IEEE, ., pp. 6973.
Slamet, B. and Pfingsthorn, M. (2009). Manifoldslam a multi-agent simultaneous localization
and mapping system for the robocup rescue
virtual robots competition, PhD thesis, Universiteit van Amsterdam.
Thrun, S., Burgard, W. and Fox, D. (1998). A probabilistic approach to concurrent mapping
and localization for mobile robots, Autonomous Robots (3-4) 253271.

Figura 11 Variacao no valor de aptidao da partcula ao longo da execucao do algoritmo.

Thrun, S., Burgard, W., Fox, D. et al. (2005).
Probabilistic robotics, MIT press Cambridge.

54