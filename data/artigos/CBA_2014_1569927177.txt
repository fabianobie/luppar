Anais do XX Congresso Brasileiro de Automática
Belo Horizonte, MG, 20 a 24 de Setembro de 2014

SIMULAÇÃO DE MICRODRENAGEM EM CIDADES CONSCIENTES
ADEMIR F. SILVA*, JULIO NOGIMA, DIEGO S. GALLO, MARCELO K. ZUFFO*
* Laboratório de Sistemas Integráveis, Departamento de Engenharia de Sistemas Eletrônicos, USP
Av. Professor Luciano Gulaberto, 158 Travessa 3 São Paulo  SP CEP 05508-900
E-mails ademir.ferreira@usp.br, mkzuffo@usp.br
Systems of Engagement and Insights, IBM Research - Brazil
Rua Tutóia, 1157 São Paulo  SP CEP04007-009
E-mails jnogima@br.ibm.com, dsgallo@br.ibm.com
Abstract  This paper analyzes the implementation of a wireless sensor network based on ultrasonic sensors for monitoring
municipal waste in storm drain inlet. The premise is that continuous monitoring of these points is an important agent in preventing floods, while optimizing the urban cleaning service indicating the precise points that should be treated as a priority. An architecture for urban micro drainage system is proposed considering the constraints of the operating environment, the sensor data
collection by a mobile sink, and cloud computing for data treatment. It is considered the information from these sensors will be
collected and transferred to cloud service via mobile sinks installed in garbage trucks. This opportunistic network data transfer
was simulated between the sensors and the mobile sink, in the Cidade Universitaria area in the city of São Paulo. The results
from simulations are analyzed and discussed as requirements in the implementation of micro drainage systems in sentient cities.
Keywords
 Storm drain inlet, Wireless Sensor Network, Opportunistic Networks, Sentient Cities
Resumo
 O artigo analisa a implantação de uma rede_de_sensores sem fio, baseada em sensores de ultra-som para
monitoramento de resíduos urbanos em bocas de lobo. A premissa é que o monitoramento contínuo destes pontos é um
importante agente na prevenção de enchentes, além de otimizar o serviço de limpeza urbana indicando com precisão os pontos
que devem ser prioritariamente atendidos. É proposta uma arquitetura de sistema de microdrenagem urbana considerando as
restrições do ambiente de operação, a coleta dos dados dos sensores pelo sorvedouro e um serviço de computação_em_nuvem
para tratamento dos dados. Considera-se que as informações destes sensores serão coletadas e transferidas ao serviço em nuvem,
por intermédio de sorvedouros móveis instalados em caminhões de coleta domiciliar de lixo. Esta rede oportunista de
transferência de dados foi simulada entre os sensores e o sorvedouro móvel, na região da Cidade Universitária na cidade de São
Paulo. Os resultados através das simulações são analisados e comentados como requisitos na implantação do sistema de
microdrenagem em cidades_conscientes.
Palavras-chave
 .

1

regular iii) serviço em nuvem para visualização e análise
dos dados. O objetivo é a diminuição da latência na
detecção dos pontos obstruídos de microdrenagem,
utilizando a frota de caminhões de coleta domiciliar de lixo
das cidades como infraestrutura móvel para sorvedouros e
estes coletarem dados de sensores instalados nas bocas de
lobo, tendo em vista que o serviço de coleta domiciliar de
lixo é prestado pelos órgãos municipais com periodicidade
de 1 a 3 dias (PMSP, 2014).

Introdução

Em uma metrópole como São Paulo, as enchentes causadas
pelas chuvas, apenas em 2008, ocasionaram prejuízos
mensais de R 546 milhões (HADDAD  TEIXEIRA,
2013). Uma parcela significativa dos 110 pontos de
alagamentos na cidade já registrados em apenas um dia
durantes estes eventos (PMSP, 2009), não estava
correlacionada com a topografia do terreno ou com a falta
de investimentos públicos em macrodrenagem (PMSP,
2010), mas com o próprio entupimento pelos transeuntes
em vias públicas, dos pontos de microdrenagem das águas
das chuvas, as chamada bocas de lobo (FERRAZ, MAZZO
 BRAGA, 2009 e SOLANO, 2009). Tipicamente a
recomendação para a limpeza destes pontos é a cada 60
dias (PMSP, 2012), mas com aproximadamente 400 mil
bocas de lobos na cidade de São Paulo (PMSP, 2010),
parte destes locais de coleta de água pluvial sofrem o
fenômeno de enchente por entupimento devido ao alto
prazo na detecção de quais destes efetivamente precisam
ser limpos.
Este trabalho propõe um sistema para monitoramento
da microdrenagem urbana, composto por i) sensores de
ultra-som alimentados por células solares instalados nestes
pontos ii) rede oportunista para coleta dos dados dos
sensores, utilizando caminhões de lixo da coleta domiciliar

2 Trabalhos Relacionados
SEE et al., (2012) apresentam um dispositivo para
monitoramento de ralos de prédios e argumentam que o
entupimento destes pontos são as maiores causas de
alagamentos residenciais no Reino Unido. O dispositivo
usa a plataforma Mica21 e baseia-se em um transdutor
acústico para detecção do fenômeno, comunicando-se via
ZigBee2 com o sorvedouro por um arranjo em estrela. O
sorvedouro por sua vez também possui um rádio adicional
GPRS (General Packet Radio Service) para comunicação
com o servidor. Uma antena foi especialmente
desenvolvida para a aplicação e testada com 8 nós
espalhados entre 12 a 67 metros do sorvedouro. Neste
1
2

2414

httpwww.cens.ucla.edumhrdaqdatasheet.pdf
httpswww.zigbee.org

Anais do XX Congresso Brasileiro de Automática
Belo Horizonte, MG, 20 a 24 de Setembro de 2014

coleta de dados, monitorando eventos diários e por
modelos analíticos, antecipando situações extraordinárias
do ambiente urbano, segue ao conceito de Cidades
Conscientes, (SHEPARD, 2011 e KOCH et al., 2013) ao
qual promove que as cidades, pelos sistemas de
gerenciamento, poderão se lembrar, correlacionar e
antecipar situações.

trabalho a alimentação dos sensores se deu por 2 pilhas
AA.
HAILONG  ZUXIN, (2011) propõe um sistema para
monitoramento de água pluvial composto por sensores de
ultra-som conectados via GPRS em um sistema Web com
informações geográficas. Neste trabalho os autores não
discutem sobre a possibilidade da funcionalidade dos
sensores em uma rede ad hoc com alimentação autônoma,
diferentemente da abordagem deste trabalho.
BURCH  PHILLIPS (1995) dissertam sobre a alta
acurácia de sensores de ultra-som no monitoramento do
fluxo de água da chuva para a prevenção do
transbordamento de bueiros combinados (pontos que
coletam simultaneamente o esgoto urbano e a água da
chuva). Entre as conclusões levantadas estão que este tipo
de transdutor é isento de calibrações e possuem um largo
intervalo de medições, sendo apropriado para monitorar as
variações na altura de água desta aplicação. DURAN,
ALTHOEFER  SENEVIRATNE, (2002) revisam o
estado da arte de tecnologias de inspeção em esgoto. Os
autores abordam os pontos prós e contra dos diversos
métodos de inspeção, como por câmera, laser, radar e ultrasom. Nota-se que em ambos trabalhos os autores reiteram a
importância do uso do ultra-som em aplicações de
monitoramento de agua pluvial.

3.1 Sensor de microdrenagem
As vantagens da utilização de transdutores ultrasônicos como sensores para monitoração de sistemas de
drenagens estão na natureza não-invasiva da operação e na
detecção de descontinuidades do meio segundo
COBBOLD (2007). O método de medição por ultra-som
pulso-eco é o preferível para aplicações como esta, onde é
apenas necessária a verificação da distância entre o sensor
e o objeto mais próximo longitudinalmente (WROBEL,
2012), sendo compatível com a profundidade típica de
aproximadamente 100 cm da boca de lobo (SÃO PAULO,
2011). Contudo, os transdutores ao utilizar este método
devem ser escolhidos de forma que a largura do pulso seja
inferior a 10 cm, caso contrário a região morta
(KRAUTKRMER  KRAUTKRMER, 1990) inerente
ao método será suficientemente grande para o sensor não
detectar com precisão o entulho exatamente quando estiver
no nível da rua, transbordando a boca de lobo. Outro
cuidado que se deve observar utilizando esta técnica é o
acréscimo de sistemas de compensação de temperatura para
corrigir eventuais erros de medição.
Sobre a autonomia de operação, devido  própria
concepção de operação, as bocas de lobos se encontram em
locais descobertos propícios para o aproveitamento da
energia_solar. Além disso, este tipo de tecnologia facilita a
instalação de sensores nestes pontos, uma vez que não é
necessário uma infraestrutura elétrica prévia até este locais,
indicando-se compatível com a função deste tipo de
dispositivo.
Considerando também a existência de milhares de
pontos de microdrenagem nas vias das cidades (PMSP,
2010), o georreferenciamento destes pode-se tornar um
grande desafio. A utilização de circuitos integrados com a
função GPS (Global Positioning System) demonstra-se
como uma alternativa a deixar essa tarefa menos
susceptível a erros manuais, aumentando a confiabilidade
dos dados sobre a posição real das bocas de lobo.
A comunicação entre os pontos deve considerar a
capilaridade das bocas de lobo na cidade, neste caso, a
forma que estas estão instaladas nas diversas quadras dos
bairros. A arquitetura 802.15.4 tem alcance de até 100
metros (BARONTI et al., 2007) e prevê que os nós serão
organizados para comunicação ad hoc. Estas características
além de atender aos padrões de localização das bocas de
lobo, cuja distância máxima recomendável é de 60 metros
(INOUYE  SOUZA, 2009), possibilitam modos de
comunicação que aproveitem a permeabilidade da
disposição destes pontos na cidade ou ainda
oportunamente utilizarem a infraestrutura de serviços que
são oferecidos regularmente, como o serviço de coleta
domiciliar de lixo. O padrão 802.15.4 ainda oferece o
modo beacon, que é um importante agente na economia de
energia dos sensores. Neste modo os sensores operam em
ciclos de operação e sono (sleep), e alimentado por uma
pilha AAA, podem manter-se em funcionamento a
períodos de até 2 anos (BARONTI et al., 2007).
O sensor necessitará de recursos de processamento e
armazenamento local para tratamento das informações
coletadas ao longo do dia, com margem adicional para
alocação dos dados que eventualmente não foram

3 Arquitetura
Em redes_oportunistas os nós podem se comunicar mesmo
nunca existindo uma rota definida de conexão entre eles
segundo PELUSI, PASSARELLA  CONTI (2006).
Funcionam com alta latência em comparação as redes em
modo infraestrutura tradicionais e aproveitam-se da
oportunidade de movimentar-se um salto na rede para ficar
mais próximo ao destino final (SHAH et al., 2003
PELUSI, PASSARELLA  CONTI, 2006 e ZHANG,
2006). Entre as técnicas existentes de redes_oportunistas,
uma das promissoras para cidades é aquela que aproveita
infraestruturas móveis, que já executam uma rota e um
serviço predeterminado, para também coletar dados
(PELUSI, PASSARELLA  CONTI, 2006). Conhecido
como data mule e apresentado por SHAH et al., (2003) é
uma arquitetura em três camadas constituídas por i)
sensores ii) sorvedouros móveis e iii) infraestrutura
computacional central.

Figura 1. Arquitetura de monitoração de microdrenagem urbana

Neste trabalho propõe-se a implantação da arquitetura
de redes_oportunistas aplicada s necessidades do sistema
de microdrenagem urbano, composto por i) sensores nas
bocas de lobo ii) caminhões de coleta domiciliar de lixo
como sorvedouros móveis e iii) serviço de computação em
núvem para visualização e análise de dados, figura 1.
Considera-se que o funcionamento de uma rede de
sensores de microdrenagem, contida em um sistema para

2415

Anais do XX Congresso Brasileiro de Automática
Belo Horizonte, MG, 20 a 24 de Setembro de 2014

transmitidos por algum tipo de insucesso de comunicação
com a rede. Terminada a monitoração do dia, a mensagem
poderá ser comprimida. Embora a técnica de compressão
acarrete uma carga adicional de processamento, irá
diminuir o tamanho do pacote de transmissão,
economizando a ocupação do canal de comunicação e
energia despendida pelo sensor, já que em termos
energéticos é mais caro o tempo despendido de transmissão
do que o tempo de processamento (MARGI et al., 2006).

3.3 Serviço em Nuvem para Cidades
O sistema de microdrenagem urbano proposto
baseado na rede oportunista prevê que apenas em
intervalos relativamente pequenos do dia, no final dos
turnos de trabalho, a rede receberá massivamente os dados
dos diversos caminhões de coleta domiciliar de lixo
espalhados na cidade. Esta forma de operação exige uma
condição de ociosidade de processamento e tráfego durante
boa parte do dia e apenas em um intervalo pequeno um
grande acesso a rede para postagem dos dados. Desta
maneira o modelo de computação_em_nuvem enquadra-se
nesta necessidade visto que uma das aplicações possíveis
ao invés do uso do processamento local é quando a
demanda pelo serviço varia ao longo do tempo
(ARMBRUST et al., 2010). Além disso vem sendo
gradativamente utilizado em cidades apoiando as diversas
iniciativas de cidades inteligentes (NAPHADE et al., 2011
e KOCH et al., 2013). Considera-se que além da
característica de expansão de armazenamento de dados, o
serviço em computação_em_nuvem deverá prover acesso 
rede de modo elástico. A figura 2 apresenta uma ilustração
de uma possível implantação deste sistema.

3.2 Rede Oportunista
Dois fatores que caracterizam o sistema de
microdrenagem urbana, além de sua capacidade, são
 Latência Período recomendado para limpeza
destes pontos.
 Cobertura Abrangência de domicílios que têm
esta infraestrutura instalada, sendo beneficiados
pela coleta de água pluvial canalizada.
Na cidade de São Paulo, por exemplo, esta latência é
de 60 dias (PMSP, 2012) e para o estado de São Paulo a
cobertura deste sistema abrange 5,3 milhões de domicílios
(BRASIL, 2010). Já a coleta domiciliar de lixo, também
tomado como referência o estado de São Paulo, cobre uma
área de 11,2 milhões de domicílios (BRASIL, 2010) e tem
a latência, neste caso sendo representado pelo período ao
qual a prefeitura presta o serviço de coleta de lixo
residencial por caminhões de lixo, de 1 a 3 dias (PMSP,
2014). Considerando as características de ambos os
serviços, ao menos no Brasil (BRASIL, 2010), a coleta
domiciliar de lixo possui cobertura mais abrangente e
latência muito inferior aquela recomendada para a limpeza
dos pontos de microdrenagem. Além disso, o percurso dos
caminhões de coleta de lixo passa nas ruas próximo das
bocas de lobo (10 metros ou menos), sendo possível a
coleta e transferência de dados dos sistemas de
microdrenagem  serviços em nuvem usando técnicas de
redes_de_sensores sem fio oportunistas como as baseadas
em data mule (SHAH et al., 2003).
Relacionando a característica de distância média das
bocas de lobo (Db) metros, a quantidade média de dados
gerados pelos sensores (Sd) bytes e o percurso médio do
caminhão compactador de lixo (Pc) metros, é possível
especificar o tamanho do armazenamento médio do
sorvedouro (As) bytes presente no caminhão de lixo antes
da transferência dos dados para a infraestrutura de
computação_em_nuvem representado em (1)
As  (Pc  Db) x Sd

Caminhão Coleta Lixo

Sensor

Figura 2. Ilustração de infraestrutura oportunista para coleta de
dados de sensores de microdrenagem urbana

4 O Experimento
Para a validação da proposta desta rede_de_sensores sem fio
direcionada a microdrenagem urbana, foi realizada a
simulação da rede_de_sensores aplicada na região da Cidade
Universitária, com 7,4 Km, na cidade de São Paulo.

(1)

A própria característica de abundância e manutenção
de recursos energéticos dos caminhões, comparados aos
recursos de sensores em rede_sem_fio típica, facilitam a
implantação de sorvedouros com maiores capacidades de
processamento e armazenamento do que os sensores. Esta
característica também viabiliza um rádio adicional
compatível com maiores taxas de transferências de dados,
por exemplo, na ordem de Mbytess para transferência dos
dados ao serviço em nuvem. Redes 802.11 em modo
infraestrutura colocadas nas garagens da frota destes
caminhões poderão prover a transferência dos dados entre
sorvedouros aos serviços de computação_em_nuvem.
Dispositivos móveis comerciais com interface 802.11
como os smartphones e tablets conectados a adaptadores
802.15.4 nestes caminhões, poderão operar como os
sorvedouros móveis na rede_de_sensores de boca de lobo.

Figura 3. Representação do cenário de sorvedouro fixo

Figura 4. Representação do cenário de sorvedouro móvel

2416

Anais do XX Congresso Brasileiro de Automática
Belo Horizonte, MG, 20 a 24 de Setembro de 2014

Neste método apenas para a distribuição da
comunicação dos diversos sensores de boca de lobo, os
sorvedouros foram posicionados nas mesmas posições das
antenas de celular da região da Cidade Universitária (figura
6), permanecendo estático durante a simulação.
Na cidade de São Paulo, por exemplo, existem
diversas operadoras de celular, sendo que aquela com
maior cobertura detêm pouco mais do que 1000 antenas
instaladas (BRASIL, 2014). Nesta avaliação foi escolhida
apenas uma operadora, a qual possui 6 antenas em
operação na região da Cidade Universitária.
Mesmo com a recomendação do espaçamento entre as
bocas de lobo de no máximo 60 metros, inclusive para
terrenos planos, a realidade mostra que estes pontos estão
posicionados a diferentes distâncias, inclusive maiores, o
que pode comprometer a interconexão entre os pontos com
arquitetura multi-saltos usando o padrão 802.15.4.
Utilizando a ferramenta de geoprocessamento ArcGIS
(VER HOEF, KRIVORUCHKO  LUCAS, 2001) com a
referência de mapa do projeto Open Street Map (HAKLAY
 WEBER, 2008) foi simulado as posições de bocas de
lobos a cada 500, 300, 200, 180, 160, 140, 120, 100, 80 e
60 metros. Considerou-se a forma de distribuição das
bocas de lobo na cidade, neste caso, nas quadras dos
bairros, próximas ao meio fio, usando as ruas como fatores
delimitadores, figuras 7 e 8.

Para atender as necessidades das cidades uma rede
escalável e de baixo_custo de operação se faz necessária. O
padrão de rede_de_sensores sem fio IEEE 802.15.4
(BARONTI et al., 2007) foi projetado para atender tais
requisitos, e neste trabalho o mesmo foi utilizado para a
camada de comunicação entre os nós sensores e o
sorvedouro. Na camada de comunicação entre o
sorvedouro e o serviço de computação_em_nuvem, duas
técnicas foram analisadas i) sorvedouro fixo, próximo a
antena de celular, com posterior transferência de dados via
GPRS, ilustrada na figura 3 ii) sorvedouro móvel,
utilizando a infraestrutura de serviço de caminhões de
coleta de lixo domiciliar e transferência dos dados para o
serviço de visualização e análise por uma conexão 802.11
na garagem dos caminhões, ilustrada na figura 4.
A visualização dos dados foi executada por um
serviço de relatos de problemas em cidades chamado de
Citizen Sensing (Sensor Cidadão) proposto por KOCH et
al., (2013). O objetivo do Citizen Sensing é engajar o
cidadão, com um smartphone, a relatar problemas na
cidade tais como poda de árvore, buraco na rua, calçadas
com falhas de acessibilidade, etc., mostrando-se como um
valioso agente na conservação da cidade e em sintonia ao
conceito de cidades_conscientes (SHEPARD, 2011). Este
serviço tem o funcionamento baseado em internet e foi
desenvolvido para operar como serviço em nuvem, figura
5. Com a correlação de dados coletados por relatos dos
cidadãos, de sensores meteorológicos e também de
sensores de microdrenagem, os modelos analíticos de
serviços em nuvem poderão gerar inovadoras
recomendações quantitativas ao sistema de drenagem para
os gestores das cidades como i) pontos de limpeza
prioritária ii) pontos de alagamento potenciais iii) locais
que a coleta de lixo está deficiente iv) modelos de
alagamento em bairros e v) análise indireta da saturação
das galerias pluviais.

Figura 7. Distribuição de boca
de lobo a cada 500m

Figura 8. Distribuição de boca
de lobo a cada 60m

Para o método de sorvedouro fixo, usando a
geolocalização da boca de lobo, foi direcionado o fluxo de
dados de cada sensor para o sorvedouro mais próximo. As
referências geográficas dos pontos definidas pelo ArcGIS
foram utilizadas como restrições para o simulador de rede
sem fio, sendo o simulador NS2 (ISSARIYAKUL 
HOSSAIN, 2012) a ferramenta utilizada.

4.2 Sorvedouro móvel
Como mencionado na seção 3, o sistema de coleta
domiciliar de lixo possui cobertura maior e latência menor
(máximo 3 dias) do que o sistema de microdrenagem
(mínimo 60 dias). Também o caminhão compactador
percorre rotas definidas próximas a boca de lobo e ainda
em termos energéticos este é tipicamente mais robusto do
que sensores autônomos. Mantendo ainda como referência
as características da cidade de São Paulo, com 376
caminhões de coleta de lixo domiciliar, percorrendo em
média 25 km, a uma velocidade média de 7 kmh (PMSP,
2014), o sistema de coleta domiciliar de lixo apresenta-se
como plausível de ser investigado para oportunamente
transferir dados entre os sensores de boca de lobo e o
serviço de nuvem. Considera-se também que o mesmo
caminhão consiga captar dados de sensores de ambos os
lados da rua, e ponderando que exista uma boca de lobo a
cada 60 metros na mesma calçada, cada caminhão será apto
a receber dados de 833 sensores, executando um trajeto
médio de 25 km. Equipados com celulares conectados a

Figura 5. Arquitetura Citizen Sensing (KOCH et al., 2013)

4.1 Sorvedouro fixo

Figura 6. Antenas distribuídas na Cidade Universitária (apenas
uma operadora)

2417

Anais do XX Congresso Brasileiro de Automática
Belo Horizonte, MG, 20 a 24 de Setembro de 2014

5 Resultados

adaptadores 802.15.4, os caminhões funcionarão como
sorvedouros móveis na rede_de_sensores de boca de lobo.
Quando retornarem ao estacionamento finalizando o turno
de operação, executarão a transferência dos dados
coletados dos sensores ao longo do dia, por pontos de
acesso 802.11 instalados nos estacionamentos destes
veículos. Ao longo de 1 dia de operação, todo o sistema
oportunista de coleta irá transferir dados de 313.208
sensores de boca de lobo, para o exemplo da cidade de São
Paulo com 376 caminhões.
Um aplicativo de smartphone poderá realizar as
funções de i) sincronismo e coleta de dados com os
sensores ii) monitoração da rota iii) contabilização das
quantidades de sensores coletados e iv) upload de dados
para o serviço de nuvem, figura 9. O comportamento deste
modelo de sorvedouro móvel também foi simulado neste
trabalho pelo NS2.

Foram catalogadas, in loco, 49 bocas de lobo existentes no
entorno de uma quadra da Cidade Universitária, junto com
as devidas posições georreferenciadas (latitude, longitude),
figura 10. Trata-se de um local plano. A média de distância
entre as bocas de lobo é de 43.6 metros, sendo que as mais
próximas têm 20.2 metros, enquanto as mais distantes têm
125.5 metros. Esta variação de distância encontrada é uma
evidência da heterogeneidade no distanciamento dos
pontos na região do experimento.

Figura 10. Localização das 49
bocas de lobo no perímetro da
Poli-USP, Cidade Universitária

A avaliação da rede_de_sensores foi efetuada em modo
de sorvedouro fixo, e em modo de sorvedouro móvel, pelos
critérios de vazão de dados (throughput), transferência de
carga útil (goodput) e de pacotes perdidos. No modo
sorvedouro fixo, foi variada a distância entre os pontos, já
que é uma situação real e implica diretamente no
desempenho da rede pela desconexão dos sensores. A
distância entre as bocas de lobos na mesma calçada
simulada foi de 500, 400, 300, 200, 180, 160, 140, 120,
100, 80 e 60 metros. Já pelo modo de sorvedouro móvel,
manteve-se a distância de 60 metros entre as bocas de lobo
e variou-se a velocidade do sorvedouro em 60, 30 e 7
kmh. As velocidades 60 e 30 kmh foram escolhidas uma
vez que em vias urbanas são velocidades máximas comuns
nas vias, porém a velocidade de 7 kmh foi selecionada por
ser a velocidade média praticada pela prefeitura de São
Paulo nos caminhões de coleta domiciliar (PMSP, 2014).
O protocolo de roteamento utilizado em modo de
sorvedouro fixo foi o AODV (Ad hoc On-Demand
Distance Vector Routing) por ser um protocolo reativo e
apropriado para rede_de_sensores sem fio escaláveis
(PERKINS  ROYER, 1999). O rádio, em modo
sorvedouro fixo, foi configurado para o máximo alcance
do padrão 802.15.4, 100 metros e para 20 metros em modo
sorvedouro móvel por considerar esta distância suficiente
no alcance dos sensores de ambos lados da rua pelo
caminhão de lixo. O tempo de simulação em modo
sorvedouro fixo foi de 30 minutos, sendo que nos 15
minutos iniciais ocorriam  geração das rotas pelo
protocolo de roteamento. Nos 15 minutos remanescentes
cada nó intercaladamente transmitia 10 pacotes com 100
bytes durante 1 segundo de transmissão. A quantia de
dados de 1 kbyte, é pouco superior ao esperado como carga
útil durante 1 dia de coleta de dados de cada sensor 455
bytes, porém a esta carga soma-se ainda handshake,
acknowledgements e eventuais retransmissões.
Em modo de sorvedouro fixo todos os pontos, exceto
o sorvedouro, funcionaram como nós coordenadores, já
que na arquitetura 802.15.4 nós comuns não suportam a
comunicação multi-saltos. No modo de sorvedouro móvel,
simulando a rede oportunista de caminhões, os nós, exceto
o sorvedouro, foram caracterizados como nós comuns.
Optou-se por analisar uma das antenas de celular das 6

Figura 9. Exemplo de aplicativo para smartphone para
gerenciamento de coleta de dados pelos sorvedouros móveis

4.3 Serviço de Computação e Nuvem
Os dados provenientes da rede_de_sensores sem fio
serão encaminhados para o serviço de relatos de problemas
na cidade Citizen Sensing. Para isto as medições realizadas
pelos sensores foram convertidas em um relatório do tipo
JSON (JavaScript Object Notation). Este formato se faz
necessário, inclusive para sensores, com objetivo de manter
a compatibilização com os relatórios enviados pelos
cidadãos por smartphones aos demais problemas na cidade,
exemplo poda de árvore, foco de dengue, calçada com
falhas de acessibilidade, etc. O formato do relatório ao
serviço em nuvem é do tipo JSON e contempla as seguintes
características i) número do sensor ii) latitude e
longitude iii) número do caminhão iv) valores da medição
e um número seqencial correspondente v) data e hora de
criação e vi) campo para status do sensor, contemplado
informações de últimas falhas e estado da bateria.
Tabela 1 Dados a ser transmitido pelos sensores em bytes
Sensor
ID

Latitude
Longitude

Caminhão
ID

Medição e
Seqencial

Data
Hora

Status

3

8

2

144 x 3

4

6

Figura 11. Modelamento
gráfico NS2 em rede 802.15.4

Neste trabalho considerou-se que todo sensor realizará
1 medição no intervalo de 10 minutos, ou seja, 144
medições ao longo do dia, desta forma cada um gera na
rede 802.15.4, além de handshake e acknowledgements,
455 bytes distribuídos conforme a tabela 1. Depois de
transformado em relatório no formato JSON pelo
sorvedouro (smartphone), estes sensores injetarão
indiretamente no serviço em nuvem, aproximadamente 4,5
kbytes cada. Considerando novamente que cada caminhão
colete os dados de aproximadamente 833 sensores, nestas
condições serão enviados próximo a 3,7 Mbytes por
sorvedouro ao serviço de visualização e análise.
2418

Anais do XX Congresso Brasileiro de Automática
Belo Horizonte, MG, 20 a 24 de Setembro de 2014

mesmo os sensores no alcance do rádio, há desconexão. O
motivo é que nesta região encontra-se um rio (Raia
Olímpica da USP) que deixa alguns sensores em distância
superior ao alcance dos transceptores do núcleo da rede.

disponíveis na região da Cidade Universitária. A figura 11
apresenta o resultado do modelamento gráfico no
simulador NS2. Os pontos isolados estão caracterizados
como as demais 5 antenas da região. Na concentração de
pontos, encontram-se 835 sensores em uma distribuição de
60 metros além do respectivo sorvedouro.

Figura 15. Perdas - sorvedouro fixo
Figura 12. Vazão de dados, dados transmitidos e perdas de enlace
na fase de geração das rotas - sorvedouro fixo

Nas figuras 12 e 13 estão os dados sobre a vazão na
rede e perdas na camada MAC em modo de sorvedouro
fixo. Na fase de roteamento (15 minutos iniciais) as perdas
são próximas aos dados recebidos, porém quando os nós
ficam mais próximos ao alcance do rádio (100 metros ou
menos), a vazão de dados recebida fica destacada e
inclusive é superior a carga de dados transmitida pelos nós,
o que é típico em uma rede_sem_fio multi-saltos, quando os
nós estão dentro da região de alcance dos transceptores. A
figura 13 enfatiza a ineficiência da rede em malha
conforme aumenta a quantidade de sensores. Na
distribuição dos sensores a cada 60 metros de distância e
com a aplicação injetando 1 kbyteseg na rede, são geradas
2 ordens de grandeza na propagação dos mesmos dados
pela rede com um volume similar de perdas pela rede. Esta
incidência é devido  disseminação do mesmo pacote na
rede multi-saltos.

Figura 16. Goodput no sorvedouro - sorvedouro fixo (escala
logarítmica)

Na figura 15 estão as perdas em modo de sorvedouro
fixo em escala logarítmica. Exceto quando os nós estão
muito longe do alcance do rádio padrão, por exemplo,
acima de 200 metros onde o volume de perdas gerado pelo
protocolo de roteamento é significante, verifica-se que a
grande causa de perdas nesta configuração está justamente
na camada MAC o que indica, neste caso, perdas por
concorrência do meio (colisão de pacotes).
Na figura 16 estão representados além das perdas
totais e os dados recebidos, a carga gerada pela aplicação e
também o goodput para o modo de sorvedouro fixo em
escala logarítmica. Nota-se que devido ao protocolo de
roteamento o goodput fica muito próximo da carga gerada
e especialmente em 60 metros, a taxa de goodput está
muito próximo ao esperado de 1 kbyteseg.
Para o modelo simulando a rede oportunista de
caminhões de coleta domiciliar de lixo, analisou-se o
funcionamento do sorvedouro móvel deslocando-se a 60,
30 e 7 kmh, para a distribuição de sensores em 60 metros.
Como neste modelo o sorvedouro passa fisicamente
próximo aos diversos sensores, o tempo de simulação varia
conforme a velocidade, sendo para 60, 30 e 7 kmh
respectivamente 20, 40 e 168 minutos aproximadamente.
Considerando a velocidade do sorvedouro, o alcance do
rádio e a variação de densidade dos sensores nas ruas, não
foi possível em modo de sorvedouro móvel manter também
a disponibilidade de uma janela de transmissão dedicada de
1 segundo para transferir 1 kbyte como feito no modo de
sorvedouro fixo. No modo de sorvedouro móvel, cada nó
transmitiu 1 kbyte por segundo, durante 40 segundos.
Nesta simulação ajustou-se o sincronismo entre os diversos
sensores e o sorvedouro móvel de forma que o sorvedouro
móvel passava pelos sensores quando estes já estavam a 20
segundos ligados. Com este tipo de carga e alcance de 20
metros de raio dos transceptores, para as velocidades
analisadas, cada sensor tinha oportunidade de transferir a
máxima carga possível. Diferentemente do modo de
sorvedouro fixo, neste modo não se definiu mecanismos de
roteamento como o AODV. Em ambos os modelos o
funcionamento em modo beacon suportado pela
arquitetura 802.15.4 estava desabilitado.

Figura 13. Vazão de dados, carga gerada pela aplicação e perdas
de enlace na fase de operação - sorvedouro fixo (escala
logarítmica)

Figura 14. Comparação entre sensores disponíveis de acordo com
o espaçamento entre eles e os sensores que o protocolo de
roteamento AODV conseguiu construir a rota.

Na figura 14 está o relacionamento entre a quantidade
de sensores simulados e a quantidade de sensores que o
protocolo de roteamento efetivamente construiu a rota
conforme a distância varia das bocas de lobo, no modo de
sorvedouro fixo. Nota-se que até abaixo de 100 metros,
2419

Anais do XX Congresso Brasileiro de Automática
Belo Horizonte, MG, 20 a 24 de Setembro de 2014

Na figura 17 apresentam-se a vazão recebida,
transmitida e também as perdas na camada MAC
(desconexão e colisão de pacotes) para o modo de
sorvedouro móvel, em escala logarítmica. De modo geral a
taxa de transmissão aumenta quando a velocidade sobe
uma vez que mais sensores estão ligados no mesmo
intervalo de tempo (tempo de simulações diferentes).
Porém as perdas na camada MAC diminuem quando a
velocidade do sorvedouro diminui.

Galaxy i5500 enviando relatórios JSON com conexão
802.11 direcionada ao serviço em nuvem Citizen Sensing.
No total foram aproximadamente 2,5 minutos gastos com a
transferência de 3,7 Mbytes  200kbps. A figura 20
apresenta a visualização dos dados no serviço Citizen
Sensing.

Figura 20. Visualização de dados para o serviço Citizen Sensing

6 Conclusão

Figura 17. Vazão sorvedouro móvel

O modo sorvedouro fixo realmente atende a rede de
microdrenagem, considerando um rádio 802.15.4 em 100
metros de alcance e com distribuição padrão das bocas de
lobo em 60 metros, porém  disseminação do mesmo
pacote na rede multi-saltos possui 100 vezes de repetições,
o que pode ser visto como ineficiência_energética e de
ocupação do canal de comunicação. Adicionalmente, a
desconexão entre os sensores mesmo abaixo do alcance do
rádio (100 metros), indica a necessidade de uma análise
criteriosa para a definição de posicionamento do
sorvedouro.
Comparativamente o modelo de rede oportunista
aplicado a microdrenagem urbana é superior do que o
modelo de sorvedouro fixo próximo as antenas de celular.
Com os resultados deste trabalho, comparando o modelo
fixo com distribuição de uma boca de lobo a cada 60
metros e o modelo oportunístico com velocidade de 7
kmh, a carga útil recebida é aproximadamente 12 vezes
maior, além de ser 18 vezes menor em termos de tráfego na
rede e também 16 vezes menor em perdas de dados. Porém
a maior preocupação neste modelo está em manter o
sincronismo entre o sorvedouro e os sensores. Os sensores
devem conhecer quando o sorvedouro irá passar para
estarem ligados no momento oportuno. Tabelas atualizadas
devem ser trocadas para manter estes sensores aptos para o
momento que o sorvedouro passar na sua região de
atuação. Embora nos experimentos realizados tenha-se
adotado 40 segundos como o tempo para a transferência
dos dados dos sensores ao sorvedouro nas velocidades
simuladas, pondera-se que o uso da função de economia de
energia (beacon) do padrão 802.15.4 aliado a algumas
horas de antecedência a manter os sensores em operação
antes que o caminhão passe pela região, possa oferecer
uma significativa contribuição para o sincronismo entre os
sensores e o caminhão, porém esta análise será tratada em
trabalhos futuros.
Embora eventualmente comprometendo análises
históricas,
uma
função
que
pode
contribuir
significativamente para a eficiência na transferência dos
dados dos sensores para o serviço em nuvem é uma
otimização prévia dos dados pelo próprio sensor. Ao invés
do sensor enviar todos os dados coletados durante o dia
para o sorvedouro, ele poderá enviar apenas um status
atualizado ao anterior como boca de lobo obstruída,
operação normalizada, limpeza recente efetuada, etc.
Porém esta avaliação será o escopo de trabalhos futuros.

Figura 18. Perdas sorvedouro móvel

Na figura 18 apresentam-se as perdas para o modo de
sorvedouro móvel. Observa-se que grandes partes das
perdas estão na camada IFQ (interface queue), neste caso
sendo representada pela pilha de eventos do sorvedouro.
Logo, as perdas no modelo de sorvedouro móvel ocorrem
devido  sobrecarga de pacotes recebidos pelo sorvedouro.

Figura 19. Goodput no sorvedouro (sorvedouro móvel)

Na figura 19 estão representados, além das perdas
totais e dos dados recebidos, a carga gerada pela aplicação
e também a vazão útil (goodput) para o modo de
sorvedouro móvel em escala logarítmica. A melhor
configuração em termos de goodput é quando a velocidade
do sorvedouro está em 7 kmh, nesta situação ocorre
também a menor perda e o goodput fica a 1 kbyteseg.
Considerando o tempo de simulação e o goodput, ambas as
velocidades de 30 e 7 kmh atendem ao requisito de
transferência de 1 kbyte por sensor, com resultado de
transferência acima deste valor em 2 kbytes e 12 kbytes,
respectivamente.
O experimento utilizando o serviço em núvem
consistiu em enviar exatamente o mesmo relatório JSON
que o sensor produzirá de 835 sensores localizados na
Cidade Universitária, considerando uma antena de celular
na distribuição de 60 metros entre bocas de lobo. Este
procedimento foi executado por um smartphone Samsung

2420

Anais do XX Congresso Brasileiro de Automática
Belo Horizonte, MG, 20 a 24 de Setembro de 2014

De modo geral foi observado que as alternativas
tecnológicas existentes como as rede_de_sensores sem fio,
os transdutores de ultra-som, as células solares, são
plausíveis de ser implantadas com resultados extremamente
favoráveis ao gerenciamento da infraestrutura de
microdrenagem de cidades.

MARGI, C. B., PETKOV, V., OBRACZKA, K., 
MANDUCHI, R. (2006). Characterizing energy
consumption in a visual sensor network testbed. In
Testbeds and Research Infrastructures for the
Development of Networks and Communities,
TRIDENTCOM 2006. March, IEEE (pp. 8-pp).
NAPHADE, M., BANAVAR, G., HARRISON, C.,
PARASZCZAK, J.,  MORRIS, R. (2011). Smarter
cities
and
their
innovation
challenges. Computer, 44(6), 32-39.
PELUSI, L., PASSARELLA, A.,  CONTI, M. (2006)
Opportunistic networking data forwarding in
disconnected
mobile
ad
hoc
networks.
Communications Magazine, IEEE, v. 44, n. 11, p.
134-141
PERKINS, C. E.  ROYER, E. M. (1999) Ad-hoc ondemand distance vector routing. In Mobile
Computing Systems and Applications, Proceedings.
WMCSA99. Second IEEE Workshop on. IEEE,
1999. p. 90-100.
PMSP. CENTRO DE GERENCIAMENTO DE
EMERGÊNCIA (2009) Alagamentos na cidade de
São Paulo em 08092009
PMSP. CAMARA MUNICIPAL DE SÃO PAULO (2010)
Relatório Final - PROCESSO RDP N 08-452010,
CPI das Enchentes
PMSP.
SECRETARIA
MUNICIPAL
DE
DESENVOLVIMENTO URBANO (2012) Manual de
Drenagem e Manejo de Águas Pluviais  Aspectos
Tecnológicos Diretrizes para Projetos  Volume III,
São Paulo SMDU
PMSP. AMLURB (2014) Autoridade Municipal de
Limpeza
Urbana
online
Disponível
em
www.prefeitura.sp.gov.brcidadesecretariasservicosa
mlurb
SÃO PAULO. SECRETARIA DE PLANEJAMENTO E
DESENVOLVIMENTO
REGIONAL
(2011)
Formalização de Convênio  Orientações
Detalhamento Técnico
SEE, C. H., HOROSHENKOV, K. V., ABDALHAMEED, R. A., HU, Y. F.,  TAIT, S. J.
(2012). A low power wireless sensor network for
gully pot monitoring in urban catchments. Sensors
Journal, IEEE, 12(5), 1545-1553.
SHAH, R. C., ROY, S., JAIN, S.,  BRUNETTE, W.
(2003). Data mules Modeling and analysis of a threetier architecture for sparse sensor networks. Ad Hoc
Networks, Elsevier. v.1 (2), p215-233.
SHEPARD, M. (2011) Sentient City ubiquitous
computing, architecture, and the future of urban
space. The MIT press
SOLANO, P. (2009) Lixo nas ruas agrava alagamentos em
São Paulo. Folha de São Paulo online 9 de
Setembro.
Disponível
em
www1.folha.uol.com.brfolhacotidianoult95u621275
.shtml
VER HOEF, J. M., KRIVORUCHKO, K.  LUCAS, N.
(2001). Using ArcGIS geostatistical analyst (Vol.
380). Redlands Esri.
WROBEL, B. M. (2012) Ultrasonic measurement and
characterization of liquid-particle flow. PhD Thesis.
University of Stavanger
ZHANG, Z. (2006) Routing in intermittently connected
mobile ad hoc networks and delay tolerant networks
overview and challenges. Communications Surveys 
Tutorials, IEEE, v. 8, n. 1, p. 24-37

Referências Bibliográficas
ARMBRUST, M., FOX, A., GRIFFITH, R., JOSEPH, A.
D., KATZ, R., KONWINSKI, A.,  ZAHARIA, M.
(2010). A view of cloud computing. Communications
of the ACM, ACM 53(4), 50-58.
BARONTI, P., PILLAI, P., CHOOK, V. W., CHESSA, S.,
GOTTA, A.,  HU, Y. F. (2007). Wireless sensor
networks A survey on the state of the art and the
802.15. 4 and ZigBee standards. Computer
communications, Elsevier 30(7), 1655-1695.
BRASIL. IBGE (2010) Censo Demográfico 2010
Características urbanísticas do entorno dos
domicílios
online
Disponível
emwww.ibge.gov.brestadosattemas.php?siglaspt
emaentornocensodemog2010
BRASIL. ANATEL (2014) Relatório das Estações por
Localidade online Disponível em
httpsistemas.anatel.gov.brstelconsultasListaEstaco
esLocalidadetela.asp?pNumServico010
BURCH, T. L.,  PHILLIPS, J. M. (1995) High-accuracy
CSO and stormwater flow monitoring. In Stormwater
NPDES Related Monitoring Needs, Colorado, Agosto,
ASCE. (pp. 609-616).
COBBOLD, R.S.C. (2007) Foundations of biomedical
ultrasound. New York Oxford University Press
DURAN, O., ALTHOEFER, K.,  SENEVIRATNE, L. D.
(2002) State of the art in sensor technologies for
sewer inspection. Sensors Journal, IEEE, v. 2, n. 2, p.
73-81, 2002.
FERRAZ, A., MAZZO, A.,  BRAGA, F. (2009) Após
chuva, prefeitura limpa bueiros só por fora. Agora
online 10 de Setembro. Disponível em
www.agora.uol.com.brsaopauloult10103u621787.sh
tml
HADDAD, E. A TEIXEIRA, E. (2013) Economic Impacts
of Natural Disasters in Megacities The case of
Floods. Sao Paulo NEREUS
HAKLAY, M.,  WEBER, P. (2008) Openstreetmap
User-generated street maps. Pervasive Computing,
IEEE, v. 7, n. 4, p. 12-18
HAILONG, Y.  ZUXIN, X. (2011) Wireless Real-Time
System for Monitoring the Storage of Urban Storm
Drainage A Case Study of Caohejing Drainage
System, Shanghai. In Network Computing and
Information
Security
(NCIS),
International
Conference on IEEE, p. 455-459.
INOUYE, K. P.  SOUZA, U. E. L. (2009) Drenagem 
Tterminologia e aspectos relevantes ao entendimento
de seu custo em empreendimentos habitacionais
horizontais, São Paulo EPUSP. ISSN 0103-9830
ISSARIYAKUL, T.,  HOSSAIN, E. (2012) An
introduction to network simulator NS2. Springer
KOCH, F.L., CARDONHA, C.H GENTIL, J.M 
BORGER, S. (2013) A platform for citizen sensing in
sentient cities. In Citizen in Sensor Networks.
Springer Berlin Heidelberg, 2013. p. 57-66.
KRAUTKRMER, J.  KRAUTKRMER, H. (1990)
Ultrasonic testing of materials. New York SpringerVerlag.
2421